<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VeiksmaÅ¾odÅ¾io Formos: Dalyvis, Pusdalyvis, Padalyvis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'OpenDyslexic', Arial, sans-serif;
            letter-spacing: 0.05em;
            background-color: #f3f4f6; /* gray-100 */
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .page-wrapper {
            width: 100%;
            max-width: 900px;
        }
        
        /* VirÅ¡utinis info blokas */
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        .back-btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 24px;
            background-color: #93c5fd;
            color: #1e3a8a;
            text-decoration: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            transition: background-color 0.3s;
            white-space: nowrap;
        }
        .back-btn:hover {
            background-color: #7CB3E9;
        }
        .student-info {
            background-color: #ffffff;
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid #4A90E2;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-grow: 1;
        }
        .change-name-btn {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        .change-name-btn:hover {
            background-color: #0D3B66;
        }

        /* KortelÄ—s stiliai */
        .card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 30px;
            border: 3px solid #60a5fa; /* blue-400 */
            min-height: 550px;
            display: none;
            flex-direction: column;
            justify-content: space-between;
        }
        .card.active {
            display: flex;
        }
        
        /* --- ATMINTINÄ–S LENTELÄ–S STILIAI --- */
        .memo-table, .example-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .memo-table th, .memo-table td, .example-table th, .example-table td {
            border: 1px solid #e5e7eb;
            padding: 10px;
            text-align: left;
        }
        .memo-table th, .example-table th {
            background-color: #d1e5f8;
            color: #1f2937;
            font-weight: bold;
        }
        
        /* SpalvÅ³ priskyrimas (Å VELNIOS ATMINTINÄ–S SPALVOS) */
        .memo-dalyvis, .example-table .dalyvis-color {
            color: #15803d; /* Tamsiai Å¾alia */
            background-color: #dcfce7; /* Labai Å¡viesi Å¾alia */
        }
        .memo-pusdalyvis, .example-table .pusdalyvis-color {
            color: #b45309; /* Tamsiai oranÅ¾inÄ— */
            background-color: #fff7ed; /* Labai Å¡viesi oranÅ¾inÄ— */
        }
        .memo-padalyvis, .example-table .padalyvis-color {
            color: #1e40af; /* Tamsiai mÄ—lyna */
            background-color: #eff6ff; /* Labai Å¡viesi mÄ—lyna */
        }
        
        /* Testo mygtukÅ³ stiliai (RYÅ KIOS SPALVOS) */
        .option-btn {
            color: white;
            font-weight: 700;
            padding: 15px;
            border-radius: 8px;
            transition: all 0.2s;
            cursor: pointer;
            margin: 10px 0;
            font-size: 1.2rem;
            text-align: center;
        }
        .btn-dalyvis { background-color: #22c55e; } /* RyÅ¡kiai Å¾alia */
        .btn-pusdalyvis { background-color: #f97316; } /* RyÅ¡kiai oranÅ¾inÄ— */
        .btn-padalyvis { background-color: #3b82f6; } /* RyÅ¡kiai mÄ—lyna */
        
        .option-btn:hover:not(.disabled) {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .option-btn.correct { background-color: #10b981 !important; } 
        .option-btn.incorrect { background-color: #ef4444 !important; } 
        
        .word-to-classify {
            font-size: 3rem;
            font-weight: bold;
            text-align: center;
            padding: 20px;
            background-color: #e3f2fd;
            border-radius: 10px;
            border: 3px solid #7cb3e9;
            color: #1a4d7a;
            margin-bottom: 30px;
        }
        
        .disabled {
            pointer-events: none;
            opacity: 0.8;
        }
        
        /* PATAISYMAS 2: IÅ¡plÄ—stas atmintinÄ—s stilius */
        .memo-definition {
             font-size: 1.15rem; /* Padidintas Å¡riftas */
             line-height: 2.0; /* Padidintas tarpas tarp eiluÄiÅ³ */
             margin-bottom: 20px;
        }
        .memo-definition strong {
             color: #1f2937; /* Tamsesnis tekstas */
        }
        
        /* ATMINTINÄ–S APRAÅ YMAS */
        .definition-section {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        
        /* Mobilusis dizainas */
        @media (max-width: 768px) {
             /* ... (kitas stilius) ... */
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        
        <div class="header-container">
            <a href="/Mokyklai/" class="back-btn">â† GrÄ¯Å¾ti Ä¯ pradÅ¾iÄ…</a>
            
            <div class="student-info">
                Mokinys: <strong id="studentNameDisplay"></strong>
                <button class="change-name-btn" onclick="changeName()">Keisti vardÄ…</button>
            </div>
        </div>

        <div id="card-memo" class="card active">
            <h1 class="question-title">ğŸ“š AtmintinÄ—: Neasmenuojamosios VeiksmaÅ¾odÅ¾io Formos</h1>

            <div class="memo-definition flex flex-col space-y-3">
                
                <p>Neasmenuojamosios veiksmaÅ¾odÅ¾io formos yra nekaitomos asmenimis, bet turi veiksmaÅ¾odÅ¾io ir kitos kalbos dalies (daÅ¾niausiai **bÅ«dvardÅ¾io** ar **prieveiksmio**) ypatybiÅ³.</p>

                <div class="definition-section def-dalyvis">
                    <h3>Dalyvis</h3>
                    <p>ApibrÄ—Å¾imas: Dalyvis yra veiksmaÅ¾odÅ¾io forma, kuri reiÅ¡kia daikto poÅ¾ymÄ¯ pagal veiksmÄ…. Jis turi bÅ«dvardÅ¾io ir veiksmaÅ¾odÅ¾io ypatybiÅ³: kaitomas giminÄ—mis, skaiÄiais ir linksniais (kaip bÅ«dvardis), turi laikus, veikslus, gali bÅ«ti veikiamasis ir neveikiamasis (kaip veiksmaÅ¾odis).</p>
                    <p>Funkcija: DaÅ¾niausiai sakinyje eina <strong>paÅ¾yminiu</strong>.</p>
                    <p>Klausimai: <strong>Koks? Kokia?</strong></p>
                    <p>Pavyzdys: <strong>BÄ—gantis</strong> (vyras), <strong>skaityta</strong> (knyga), <strong>paraÅ¡ytas</strong> (laiÅ¡kas).</p>
                </div>

                <div class="definition-section def-pusdalyvis">
                    <h3>Pusdalyvis</h3>
                    <p>ApibrÄ—Å¾imas: Pusdalyvis yra neasmenuojamoji veiksmaÅ¾odÅ¾io forma, kuri reiÅ¡kia Å¡alutinÄ¯ veiksmÄ…, vykstantÄ¯ <strong>tuo paÄiu metu</strong> kaip ir pagrindinis veiksmas, ir tik tada, kai abu veiksmus atlieka <strong>tas pats veikÄ—jas</strong>.</p>
                    <p>Funkcija: Sakinyje eina <strong>aplinkybe</strong> (daÅ¾niausiai laiko ar bÅ«do).</p>
                    <p>Klausimai: <strong>KÄ… veikdamas?</strong></p>
                    <p>Pavyzdys: <strong>Eidamas</strong> (aÅ¡) namo, galvojau apie darbÄ… (aÅ¡ galvojau ir aÅ¡ Ä—jau tuo paÄiu metu).</p>
                </div>

                <div class="definition-section def-padalyvis">
                    <h3>Padalyvis</h3>
                    <p>ApibrÄ—Å¾imas: Padalyvis yra neasmenuojamoji veiksmaÅ¾odÅ¾io forma, kuri reiÅ¡kia Å¡alutinÄ¯ veiksmÄ…, susijusÄ¯ su pagrindiniu veiksmu, bet Å¡iuos veiksmus atlieka <strong>skirtingi veikÄ—jai</strong> arba veiksmas yra apibendrintas (nenurodytas konkretus veikÄ—jas).</p>
                    <p>Funkcija: Sakinyje eina <strong>aplinkybe</strong>.</p>
                    <p>Klausimai: <strong>Kaip? Kada? KÄ… veikiant?</strong></p>
                    <p>Pavyzdys: Jam <strong>atÄ—jus</strong>, visi nutilo (jis atÄ—jo, o nutilo visi kiti). Saulei <strong>Å¡vieÄiant</strong>, mes iÅ¡Ä—jome pasivaikÅ¡Äioti (Å¡vietÄ— saulÄ—, o iÅ¡Ä—jome mes).</p>
                </div>
            </div>
            
            <h3 class="font-bold text-lg text-blue-700 mb-2 border-b pb-1">PriesagÅ³ pavyzdÅ¾iai</h3>
            <table class="memo-table">
                <thead>
                    <tr>
                        <th class="memo-dalyvis">Dalyvis</th>
                        <th class="memo-pusdalyvis">Pusdalyvis</th>
                        <th class="memo-padalyvis">Padalyvis</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>-ant<strong>is</strong>, -us<strong>is</strong>, -im<strong>as</strong>, -t<strong>as</strong>, -s<strong>iÄ…s</strong></td>
                        <td>-d<strong>amas</strong>, -d<strong>ama</strong>, -dam<strong>i</strong>, -dam<strong>os</strong></td>
                        <td>-ant, -int, -iant, -us, -ius, -<strong>us</strong>, -<strong>iÅ«s</strong></td>
                    </tr>
                    <tr>
                         <td><em>BÄ—gant</em><strong>is</strong>, <em>pamatyt</em><strong>as</strong>, <em>dary</em><strong>sianÄias</strong></td>
                         <td><em>Skait</em><strong>ydamas</strong>, <em>raÅ¡y</em><strong>dama</strong>, <em>neÅ¡</em><strong>dami</strong></td>
                         <td><em>VaikÅ¡Äi</em><strong>ojant</strong>, <em>atmin</em><strong>us</strong>, <em>dirb</em><strong>iant</strong>, <em>vaÅ¾iuoj</em><strong>ant</strong></td>
                    </tr>
                </tbody>
            </table>
            
            <div class="button-container mt-auto">
                <button onclick="showCard('card-task-1')" class="action-button bg-blue-600 hover:bg-blue-700 text-white">â–¶ï¸ PradÄ—ti testÄ…</button>
            </div>
        </div>

        <div id="task-cards-container"></div>

        <div id="card-results" class="card">
            <h2 class="question-title">ğŸ‰ Testo rezultatai</h2>
            <div class="result-container">
                <div class="result-details" id="result-details"></div>
                <div class="total-score" id="total-score"></div>
            </div>
            <div class="button-container">
                <button onclick="location.reload()" class="action-button bg-green-600 hover:bg-green-700 text-white">ğŸ”„ PradÄ—ti iÅ¡ naujo</button>
            </div>
        </div>
    </div>

    <script>
        // --- KONFIGURACIJA ---
        const SHEET_URL = 'https://script.google.com/macros/s/AKfycbzhXP3hJ6NBLOld6Gbg-tlN-Tk8BPoxx32tx9j-iKCJChVyeOpZiDyGu9g2cm6Vl0uf/exec';
        const TASK_ID = 'L0050 Dalyvis, Pusdalyvis, Padalyvis | 9 Å¾odÅ¾iai';
        
        // --- KLAUSIMÅ² DUOMENYS (9 Å¾odÅ¾iai) ---
        const QUESTIONS_DATA = [
            { word: "PAVARGÄ˜S", correct: "Dalyvis" },
            { word: "ATMINÄ˜S", correct: "Dalyvis" },
            { word: "PERSKAITYTAS", correct: "Dalyvis" },
            { word: "PAÅ½VELGÄ˜S", correct: "Dalyvis" },
            { word: "NEÅ AMAS", correct: "Dalyvis" },
            { word: "PATEKÄ˜S", correct: "Dalyvis" },
            { word: "BÄ–GANT", correct: "Padalyvis" },
            { word: "DARANTIS", correct: "Dalyvis" },
            { word: "VAÅ½IUOSIÄ„S", correct: "Dalyvis" }
        ];
        
        // PATAISYMAS 3: Ä®traukti klausimus Ä¯ OPTIONS, kad bÅ«tÅ³ galima juos rodyti lentelÄ—je
        const OPTIONS = [
            { name: "Dalyvis", css: "btn-dalyvis", k: "Koks? Kokia?", css_memo: "dalyvis-color" },
            { name: "Pusdalyvis", css: "btn-pusdalyvis", k: "KÄ… veikdamas?", css_memo: "pusdalyvis-color" },
            { name: "Padalyvis", css: "btn-padalyvis", k: "Kaip? Kada? KÄ… veikiant?", css_memo: "padalyvis-color" }
        ];
        const totalQuestions = QUESTIONS_DATA.length; 

        // --- BÅªSENA ---
        let questionsShuffled = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswersLog = [];

        // --- VARDÅ² VALDYMAS IR REZULTATAI ---
        function showNamePrompt() {
            const studentName = localStorage.getItem('studentName');
            if (!studentName) {
                const name = prompt('Ä®vesk savo vardÄ…:');
                if (name && name.trim() !== '') {
                    localStorage.setItem('studentName', name.trim());
                    return name.trim();
                } else {
                    alert('PraÅ¡ome Ä¯vesti vardÄ…, kad galÄ—tumÄ—te pradÄ—ti uÅ¾duotÄ¯.');
                    return showNamePrompt();
                }
            }
            return studentName;
        }

        function changeName() {
            localStorage.removeItem('studentName');
            showNamePrompt();
            location.reload();
        }

        function sendResultToSheet(taskName, score) {
            const studentName = localStorage.getItem('studentName') || 'NeÅ¾inomas';
            const timestamp = new Date().toLocaleString('lt-LT');
            const data = {
                name: studentName,
                task: taskName,
                score: score,
                timestamp: timestamp
            };
            fetch(SHEET_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            }).then(() => console.log('Rezultatas sÄ—kmingai iÅ¡siÅ³stas!'))
              .catch(error => console.error('Klaida siunÄiant rezultatÄ…:', error));
        }

        // --- PAGALBINÄ–S FUNKCIJOS ---

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        // --- KORTELIÅ² GENERAVIMAS ---

        function generateTaskCards() {
            const container = document.getElementById('task-cards-container');
            questionsShuffled = shuffleArray(QUESTIONS_DATA); 
            
            questionsShuffled.forEach((question, index) => {
                const cardId = `card-task-${index + 1}`;
                const cardDiv = document.createElement('div');
                cardDiv.id = cardId;
                cardDiv.className = 'card';
                
                // MaiÅ¡ome pasirinkimus kiekvienam klausimui
                const optionsShuffled = shuffleArray([...OPTIONS]);

                const optionsHtml = optionsShuffled.map(opt => 
                    `<button class="option-btn ${opt.css}" data-answer="${opt.name}" onclick="checkAnswer(this, '${opt.name}', ${index + 1})">${opt.name}</button>`
                ).join('');
                
                // PATAISYMAS 1: LentelÄ—s antraÅ¡tÄ—s ir klausimÅ³ eilutÄ—s generavimas
                const dalyvis = OPTIONS.find(o => o.name === 'Dalyvis');
                const pusdalyvis = OPTIONS.find(o => o.name === 'Pusdalyvis');
                const padalyvis = OPTIONS.find(o => o.name === 'Padalyvis');

                cardDiv.innerHTML = `
                    <h2 class="question-title">Klausimas ${index + 1} iÅ¡ ${totalQuestions}</h2>

                    <div class="word-to-classify">${question.word}</div>
                    
                    <div id="options-${index + 1}" class="flex flex-col space-y-4 mb-8">
                        ${optionsHtml}
                    </div>

                    <div id="feedback-${index + 1}" class="feedback"></div>

                    <div class="mt-auto pt-6 border-t">
                        <h3 class="font-bold text-lg text-blue-700 mb-2 border-b pb-1">ğŸ‘€ Atminties nuoroda</h3>
                        <table class="example-table">
                            <thead>
                                <tr>
                                    <th class="${dalyvis.css_memo}">Dalyvis</th>
                                    <th class="${pusdalyvis.css_memo}">Pusdalyvis</th>
                                    <th class="${padalyvis.css_memo}">Padalyvis</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>${dalyvis.k}</td>
                                    <td>${pusdalyvis.k}</td>
                                    <td>${padalyvis.k}</td>
                                </tr>
                                <tr>
                                    <td>DirbÄ™s, Dirbamas, SkaitÄ…s</td>
                                    <td>Dirbdamas, Skaitydama</td>
                                    <td>Dirbant, Skaitant</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                `;
                container.appendChild(cardDiv);
            });
        }
        
        // --- TIKRINIMO LOGIKA ---

        function checkAnswer(button, selectedAnswer, questionNum) {
            const questionData = questionsShuffled[questionNum - 1];
            const correct = questionData.correct;
            const isCorrect = selectedAnswer === correct;
            
            const feedbackEl = document.getElementById(`feedback-${questionNum}`);
            const optionsContainer = document.getElementById(`options-${questionNum}`);
            
            // PaÅ¾ymime visus mygtukus
            optionsContainer.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.add('disabled');
                if (btn.dataset.answer === correct) {
                    btn.classList.add('correct');
                } else if (btn.dataset.answer === selectedAnswer) {
                    btn.classList.add('incorrect');
                }
            });

            if (isCorrect) {
                score++;
                feedbackEl.innerHTML = `<span class="text-green-600">âœ… Teisingai! Tai yra ${correct}.</span>`;
            } else {
                feedbackEl.innerHTML = `<span class="text-red-600">âŒ Neteisingai. Teisingas atsakymas: ${correct}.</span>`;
            }

            // Ä®raÅ¡ome atsakymÄ…
            userAnswersLog.push({
                word: questionData.word,
                correct: correct,
                selected: selectedAnswer,
                isCorrect: isCorrect
            });

            // PridÄ—ti Toliau mygtukÄ…
            const nextBtn = document.createElement('button');
            nextBtn.className = 'action-button bg-blue-600 hover:bg-blue-700 text-white mt-4';
            
            if (questionNum < totalQuestions) {
                nextBtn.textContent = 'â¡ï¸ Toliau';
                nextBtn.onclick = () => showCard(`card-task-${questionNum + 1}`);
            } else {
                nextBtn.textContent = 'ğŸ Rezultatai';
                nextBtn.onclick = showResults;
            }
            
            optionsContainer.appendChild(nextBtn);
        }

        // --- KORTELIÅ² NAVIGACIJA ---

        function showCard(cardId) {
            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('active');
            });
            document.getElementById(cardId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function showResults() {
            showCard('card-results');
            
            const totalScoreEl = document.getElementById('total-score');
            const resultDetailsEl = document.getElementById('result-details');
            
            const percentage = Math.round((score / totalQuestions) * 100);
            const scoreClass = percentage >= 70 ? 'score-good' : 'score-bad';
            
            totalScoreEl.innerHTML = `
                <div>Teisingai atsakyta: <strong>${score} iÅ¡ ${totalQuestions}</strong></div>
                <div class="score-percentage ${scoreClass}">${percentage}%</div>
            `;
            
            // Detali suvestinÄ—
            let detailsHTML = '';
            userAnswersLog.forEach((answer, index) => {
                const itemClass = answer.isCorrect ? 'correct-item' : 'incorrect-item';
                const icon = answer.isCorrect ? 'âœ…' : 'âŒ';
                
                detailsHTML += `
                    <div class="p-3 rounded-md border ${itemClass}">
                        ${icon} <strong>${answer.word}</strong>: Pasirinkta: ${answer.selected}. Teisinga: ${answer.correct}.
                    </div>
                `;
            });
            resultDetailsEl.innerHTML = detailsHTML;
            
            // SiunÄiame rezultatus
            sendResultToSheet(TASK_ID, percentage);
        }


        // --- INICIALIZACIJA ---

        window.onload = function() {
            const studentName = showNamePrompt();
            document.getElementById('studentNameDisplay').textContent = studentName;
            
            window.changeName = changeName;
            window.showCard = showCard;
            window.checkAnswer = checkAnswer;
            window.showResults = showResults;
            
            generateTaskCards();
            showCard('card-memo'); // Pradedame nuo atmintinÄ—s
        };
    </script>
</body>
</html>

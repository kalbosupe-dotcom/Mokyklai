<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <title>Veikiamieji ir neveikiamieji dalyviai â€“ atskirk</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'OpenDyslexic', Arial, sans-serif;
            letter-spacing: 0.05em;
            background-color: #E8F4F8;
            line-height: 1.9;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .page-wrapper {
            width: 100%;
            max-width: 1100px;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        .back-btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 24px;
            background-color: #93c5fd;
            color: #1e3a8a;
            text-decoration: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            transition: background-color 0.3s;
            white-space: nowrap;
        }
        .back-btn:hover { background-color: #7CB3E9; }

        .student-info {
            background-color: #ffffff;
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid #4A90E2;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-grow: 1;
            gap: 10px;
        }
        .change-name-btn {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'OpenDyslexic', Arial, sans-serif;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .change-name-btn:hover { background-color: #0D3B66; }

        .card {
            width: 100%;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(26, 77, 122, 0.15);
            padding: 30px;
            border: 3px solid #4A90E2;
            margin-bottom: 25px;
        }

        .intro-text {
            font-size: 1.9rem;
            font-weight: bold;
            color: #0D3B66;
            margin-bottom: 15px;
            text-align: center;
        }
        .intro-content {
            font-size: 1.05rem;
            color: #1A4D7A;
        }
        .intro-content ul {
            margin-top: 10px;
            padding-left: 25px;
            list-style: disc;
        }
        .intro-content li { margin-bottom: 6px; }

        .table-wrapper {
            margin-top: 20px;
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.98rem;
        }
        th, td {
            border: 1px solid #cbd5e1;
            padding: 8px 6px;
            text-align: left;
        }
        th {
            background-color: #DBEAFE;
            color: #1e3a8a;
            font-weight: 700;
            text-align: center;
        }
        td:first-child { text-align: center; }

        .participle {
            font-weight: 700;
        }

        select {
            width: 100%;
            padding: 6px 4px;
            border-radius: 6px;
            border: 1px solid #93c5fd;
            font-family: 'OpenDyslexic', Arial, sans-serif;
            background-color: #ffffff;
        }

        .cell-correct {
            background-color: #d4edda !important;
            border-color: #27ae60 !important;
        }
        .cell-incorrect {
            background-color: #f8d7da !important;
            border-color: #e74c3c !important;
        }

        .button-container {
            text-align: center;
            margin-top: 20px;
        }
        .action-button {
            padding: 14px 32px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            background: linear-gradient(135deg, #4A90E2, #0D3B66);
            color: white;
            border: none;
            border-radius: 10px;
            transition: all 0.3s;
            font-family: 'OpenDyslexic', Arial, sans-serif;
        }
        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }

        .feedback-text {
            margin-top: 12px;
            font-size: 1rem;
            color: #1A4D7A;
        }
        .result-container {
            text-align: center;
            margin-top: 18px;
            font-size: 1.3rem;
            font-weight: bold;
            color: #1A4D7A;
            padding: 16px;
            background-color: #E8F4F8;
            border-radius: 10px;
            border: 3px solid #4ECDC4;
        }

        .memo-title {
            font-size: 1.4rem;
            font-weight: 800;
            color: #1d4ed8;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .memo-card {
            margin-top: 10px;
            padding: 18px;
            border-radius: 14px;
            background-color: #f9fafb;
            border: 2px solid #bfdbfe;
            font-size: 0.98rem;
            color: #1f2937;
        }
        .memo-card ul {
            margin-left: 20px;
            margin-top: 8px;
        }
        .memo-card li { margin-bottom: 4px; }

        .memo-label {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.9rem;
        }
        .memo-label-noun {
            background-color: #fde68a;
        }
        .memo-label-verb {
            background-color: #e5e7eb;
        }
        .memo-label-participle {
            background-color: #bbf7d0;
        }
        .memo-label-participle-passive {
            background-color: #bfdbfe;
        }

        @media (max-width: 768px) {
            .intro-text { font-size: 1.6rem; }
            .card { padding: 22px; }
            .header-container {
                flex-direction: column;
                align-items: stretch;
            }
            .back-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
<div class="page-wrapper">

    <div class="header-container">
        <a href="/Mokyklai/" class="back-btn">â† GrÄ¯Å¾ti Ä¯ pradÅ¾iÄ…</a>
        <div class="student-info">
            <span style="font-size: 18px; color: #1A4D7A;">
                Mokinys: <strong id="studentNameDisplay"></strong>
            </span>
            <button class="change-name-btn" onclick="changeName()">Keisti vardÄ…</button>
        </div>
    </div>

    <!-- UÅ½DUOTIS -->
    <div class="card">
        <h2 class="intro-text">Atskirk veikiamuosius ir neveikiamuosius dalyvius</h2>
        <div class="intro-content">
            <ul>
                <li>ğŸ“š Perskaityk Å¾odÅ¾iÅ³ junginius.</li>
                <li>ğŸŸ¡ Kiekviename junginyje paryÅ¡kintas Å¾odis yra <strong>dalyvis</strong>.</li>
                <li>ğŸ“ Kiekvienai eilutei pasirink:
                    <ul>
                        <li>ar tai <strong>veikiamasis</strong>, ar <strong>neveikiamasis</strong> dalyvis;</li>
                        <li><strong>giminÄ™</strong> â€“ vyriÅ¡koji ar moteriÅ¡koji;</li>
                        <li><strong>laikÄ…</strong> â€“ esamasis ar bÅ«tasis kartinis;</li>
                        <li><strong>skaiÄiÅ³</strong> â€“ vienaskaita ar daugiskaita.</li>
                    </ul>
                </li>
                <li>âœ… Paspausk â€Pasitikrintiâ€œ.</li>
            </ul>
        </div>

        <div class="table-wrapper">
            <table id="task-table">
                <thead>
                <tr>
                    <th>Nr.</th>
                    <th>Å½odÅ¾iÅ³ junginys</th>
                    <th>Dalyvio rÅ«Å¡is</th>
                    <th>GiminÄ—</th>
                    <th>Laikas</th>
                    <th>SkaiÄius</th>
                </tr>
                </thead>
                <tbody>
                <!-- EilutÄ—s sugeneruojamos JS -->
                </tbody>
            </table>
        </div>

        <div class="feedback-text" id="feedback-area"></div>

        <div class="button-container">
            <button onclick="checkTask()" class="action-button">âœ… Pasitikrinti</button>
        </div>

        <div id="result-box" class="result-container" style="display:none;"></div>
    </div>

    <!-- ATMINTINÄ– -->
    <div class="card">
        <div class="memo-title">ğŸ‘€ AtmintinÄ—: veikiamieji ir neveikiamieji dalyviai</div>
        <div class="memo-card">
            <p><strong>VyriÅ¡koji giminÄ—</strong></p>
            <p>
                Koks draugas? <span class="memo-label memo-label-noun">Draugas</span>  
                Koks laiÅ¡kas? <span class="memo-label memo-label-noun">laiÅ¡kas</span>
            </p>
            <p>
                <span class="memo-label memo-label-verb">raÅ¡o</span> laiÅ¡kÄ… â†’  
                <span class="memo-label memo-label-participle">raÅ¡antis</span> draugas  
                (draugas, <u>kuris raÅ¡o</u>)
            </p>
            <p>
                <span class="memo-label memo-label-participle-passive">raÅ¡omas</span> laiÅ¡kas  
                (laiÅ¡kas, <u>kurÄ¯ raÅ¡o</u>)
            </p>
            <p style="margin-top:8px;">
                <span class="memo-label memo-label-verb">paraÅ¡Ä—</span> laiÅ¡kÄ… â†’  
                <span class="memo-label memo-label-participle">paraÅ¡Ä™s</span> draugas  
                (draugas, <u>kuris paraÅ¡Ä—</u>)  
                ir <span class="memo-label memo-label-participle-passive">paraÅ¡ytas</span> laiÅ¡kas  
                (laiÅ¡kas, <u>kurÄ¯ paraÅ¡Ä—</u>).
            </p>

            <hr style="margin:14px 0; border-color:#e5e7eb;">

            <p><strong>MoteriÅ¡koji giminÄ—</strong></p>
            <p>
                Kokia draugÄ—? <span class="memo-label memo-label-noun">DraugÄ—</span>  
                Kokia Å¾inutÄ—? <span class="memo-label memo-label-noun">Å¾inutÄ—</span>
            </p>
            <p>
                <span class="memo-label memo-label-verb">raÅ¡o</span> Å¾inutÄ™ â†’  
                <span class="memo-label memo-label-participle">raÅ¡anti</span> draugÄ—  
                (draugÄ—, <u>kuri raÅ¡o</u>)  
                ir <span class="memo-label memo-label-participle-passive">raÅ¡oma</span> Å¾inutÄ—  
                (Å¾inutÄ—, <u>kuriÄ… raÅ¡o</u>).
            </p>
            <p style="margin-top:8px;">
                <span class="memo-label memo-label-verb">paraÅ¡Ä—</span> Å¾inutÄ™ â†’  
                <span class="memo-label memo-label-participle">paraÅ¡iusi</span> draugÄ—  
                (draugÄ—, <u>kuri paraÅ¡Ä—</u>)  
                ir <span class="memo-label memo-label-participle-passive">paraÅ¡yta</span> Å¾inutÄ—  
                (Å¾inutÄ—, <u>kuriÄ… paraÅ¡Ä—</u>).
            </p>

            <ul style="margin-top:10px;">
                <li><strong>Veikiamasis dalyvis</strong> â€“ tas, kuris <u>daro veiksmÄ…</u> (kuris raÅ¡o, kuris paraÅ¡Ä—).</li>
                <li><strong>Neveikiamasis dalyvis</strong> â€“ tas, kuriam <u>veiksmas padarytas</u> (kurÄ¯ raÅ¡o, kuriÄ… paraÅ¡Ä—).</li>
            </ul>
        </div>
    </div>

</div>

<script>
    // --- VardÅ³ valdymas ---
    function showNamePrompt() {
        const studentName = localStorage.getItem('studentName');
        if (!studentName) {
            const name = prompt('Ä®vesk savo vardÄ…:');
            if (name && name.trim() !== '') {
                localStorage.setItem('studentName', name.trim());
                return name.trim();
            } else {
                alert('PraÅ¡ome Ä¯vesti vardÄ…, kad galÄ—tumÄ—te pradÄ—ti uÅ¾duotÄ¯.');
                return showNamePrompt();
            }
        }
        return studentName;
    }
    function changeName() {
        localStorage.removeItem('studentName');
        const newName = showNamePrompt();
        alert(`Vardas pakeistas Ä¯: \${newName}`);
        location.reload();
    }
    function sendResultToSheet(taskName, score) {
        const studentName = localStorage.getItem('studentName') || 'NeÅ¾inomas';
        const timestamp = new Date().toLocaleString('lt-LT');
        const data = { name: studentName, task: taskName, score: score, timestamp: timestamp };

        fetch('https://script.google.com/macros/s/AKfycbzhXP3hJ6NBLOld6Gbg-tlN-Tk8BPoxx32tx9j-iKCJChVyeOpZiDyGu9g2cm6Vl0uf/exec', {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        }).then(() => {
            console.log('Rezultatas sÄ—kmingai iÅ¡siÅ³stas Ä¯ Google Sheets! âœ…');
        }).catch(error => {
            console.error('Klaida siunÄiant rezultatÄ…:', error);
        });
    }

    const studentName = showNamePrompt();
    document.getElementById('studentNameDisplay').textContent = studentName;

    // --- UÅ½DUOTIES DUOMENYS ---
    // 10 junginiÅ³, dalyvis paryÅ¡kintas (<strong>)
    const ITEMS = [
        {
            text: 'su <span class="participle">dainuojanÄia</span> klase',
            type: 'veikiamasis',
            gender: 'moteriÅ¡koji',
            time: 'esamasis',
            number: 'vienaskaita'
        },
        {
            text: 'apie <span class="participle">dainuojanÄius</span> vaikus',
            type: 'veikiamasis',
            gender: 'vyriÅ¡koji',
            time: 'esamasis',
            number: 'daugiskaita'
        },
        {
            text: 'nuo <span class="participle">dainavusiÅ³</span> Å¾moniÅ³',
            type: 'veikiamasis',
            gender: 'vyriÅ¡koji',
            time: 'bÅ«tasis kartinis',
            number: 'daugiskaita'
        },
        {
            text: 'su <span class="participle">dainavusiomis</span> mergaitÄ—mis',
            type: 'veikiamasis',
            gender: 'moteriÅ¡koji',
            time: 'bÅ«tasis kartinis',
            number: 'daugiskaita'
        },
        {
            text: 'apie <span class="participle">raÅ¡omÄ…</span> pasakÄ…',
            type: 'neveikiamasis',
            gender: 'moteriÅ¡koji',
            time: 'esamasis',
            number: 'vienaskaita'
        },
        {
            text: 'apie <span class="participle">raÅ¡omus</span> laiÅ¡kus',
            type: 'neveikiamasis',
            gender: 'vyriÅ¡koji',
            time: 'esamasis',
            number: 'daugiskaita'
        },
        {
            text: 'su <span class="participle">paraÅ¡ytu</span> laiÅ¡ku',
            type: 'neveikiamasis',
            gender: 'vyriÅ¡koji',
            time: 'bÅ«tasis kartinis',
            number: 'vienaskaita'
        },
        {
            text: 'su <span class="participle">paraÅ¡ytomis</span> uÅ¾duotimis',
            type: 'neveikiamasis',
            gender: 'moteriÅ¡koji',
            time: 'bÅ«tasis kartinis',
            number: 'daugiskaita'
        },
        {
            text: 'apie <span class="participle">skaitanÄius</span> mokinius',
            type: 'veikiamasis',
            gender: 'vyriÅ¡koji',
            time: 'esamasis',
            number: 'daugiskaita'
        },
        {
            text: 'su <span class="participle">skaiÄiusiais</span> vaikaiÄiais',
            type: 'veikiamasis',
            gender: 'vyriÅ¡koji',
            time: 'bÅ«tasis kartinis',
            number: 'daugiskaita'
        }
    ];

    const TYPE_OPTIONS = ["", "veikiamasis dalyvis", "neveikiamasis dalyvis"];
    const GENDER_OPTIONS = ["", "vyriÅ¡koji giminÄ—", "moteriÅ¡koji giminÄ—"];
    const TIME_OPTIONS = ["", "esamasis laikas", "bÅ«tasis kartinis laikas"];
    const NUMBER_OPTIONS = ["", "vienaskaita", "daugiskaita"];

    // --- LentelÄ—s generavimas ---
    function buildTable() {
        const tbody = document.querySelector('#task-table tbody');
        tbody.innerHTML = "";

        ITEMS.forEach((item, index) => {
            const tr = document.createElement('tr');

            const tdNr = document.createElement('td');
            tdNr.textContent = index + 1;
            tr.appendChild(tdNr);

            const tdText = document.createElement('td');
            tdText.innerHTML = item.text;
            tr.appendChild(tdText);

            // RÅ«Å¡is
            const tdType = document.createElement('td');
            const selType = document.createElement('select');
            selType.id = `type-${index}`;
            TYPE_OPTIONS.forEach(opt => {
                const o = document.createElement('option');
                o.value = opt;
                o.textContent = opt === "" ? "Pasirink" : opt;
                selType.appendChild(o);
            });
            tdType.appendChild(selType);
            tr.appendChild(tdType);

            // GiminÄ—
            const tdGender = document.createElement('td');
            const selGender = document.createElement('select');
            selGender.id = `gender-${index}`;
            GENDER_OPTIONS.forEach(opt => {
                const o = document.createElement('option');
                o.value = opt;
                o.textContent = opt === "" ? "Pasirink" : opt;
                selGender.appendChild(o);
            });
            tdGender.appendChild(selGender);
            tr.appendChild(tdGender);

            // Laikas
            const tdTime = document.createElement('td');
            const selTime = document.createElement('select');
            selTime.id = `time-${index}`;
            TIME_OPTIONS.forEach(opt => {
                const o = document.createElement('option');
                o.value = opt;
                o.textContent = opt === "" ? "Pasirink" : opt;
                selTime.appendChild(o);
            });
            tdTime.appendChild(selTime);
            tr.appendChild(tdTime);

            // SkaiÄius
            const tdNumber = document.createElement('td');
            const selNumber = document.createElement('select');
            selNumber.id = `number-${index}`;
            NUMBER_OPTIONS.forEach(opt => {
                const o = document.createElement('option');
                o.value = opt;
                o.textContent = opt === "" ? "Pasirink" : opt;
                selNumber.appendChild(o);
            });
            tdNumber.appendChild(selNumber);
            tr.appendChild(tdNumber);

            tbody.appendChild(tr);
        });
    }

    // --- Tikrinimas ---
    function checkTask() {
        const feedbackArea = document.getElementById('feedback-area');
        const resultBox = document.getElementById('result-box');

        let total = 0;
        let correct = 0;

        // nuimame senas spalvas
        document.querySelectorAll('#task-table td').forEach(td => {
            td.classList.remove('cell-correct', 'cell-incorrect');
        });

        ITEMS.forEach((item, index) => {
            const tdType = document.getElementById(`type-${index}`).parentElement;
            const tdGender = document.getElementById(`gender-${index}`).parentElement;
            const tdTime = document.getElementById(`time-${index}`).parentElement;
            const tdNumber = document.getElementById(`number-${index}`).parentElement;

            const selType = document.getElementById(`type-${index}`);
            const selGender = document.getElementById(`gender-${index}`);
            const selTime = document.getElementById(`time-${index}`);
            const selNumber = document.getElementById(`number-${index}`);

            // RÅ«Å¡is
            total++;
            const correctType = item.type === "veikiamasis" ? "veikiamasis dalyvis" : "neveikiamasis dalyvis";
            if (selType.value === correctType) {
                correct++;
                tdType.classList.add('cell-correct');
            } else {
                tdType.classList.add('cell-incorrect');
            }

            // GiminÄ—
            total++;
            const correctGender = item.gender === "vyriÅ¡koji" ? "vyriÅ¡koji giminÄ—" : "moteriÅ¡koji giminÄ—";
            if (selGender.value === correctGender) {
                correct++;
                tdGender.classList.add('cell-correct');
            } else {
                tdGender.classList.add('cell-incorrect');
            }

            // Laikas
            total++;
            const correctTime = item.time === "esamasis" ? "esamasis laikas" : "bÅ«tasis kartinis laikas";
            if (selTime.value === correctTime) {
                correct++;
                tdTime.classList.add('cell-correct');
            } else {
                tdTime.classList.add('cell-incorrect');
            }

            // SkaiÄius
            total++;
            const correctNumber = item.number === "vienaskaita" ? "vienaskaita" : "daugiskaita";
            if (selNumber.value === correctNumber) {
                correct++;
                tdNumber.classList.add('cell-correct');
            } else {
                tdNumber.classList.add('cell-incorrect');
            }
        });

        const percentage = total > 0 ? Math.round((correct / total) * 100) : 0;

        feedbackArea.innerHTML = `
            TeisingÅ³ atsakymÅ³: <strong>${correct}</strong> iÅ¡ <strong>${total}</strong> (${percentage}%).
        `;

        resultBox.style.display = 'block';
        resultBox.innerHTML = `
            <div>Bendras rezultatas:</div>
            <div style="font-size:2.2rem; margin-top:8px;">
                ${percentage}%
            </div>
        `;

        sendResultToSheet('L0XXX Veikiamieji ir neveikiamieji dalyviai â€“ atskirk', percentage);
    }

    // --- Inicializacija ---
    window.onload = function () {
        buildTable();
    };
</script>
</body>
</html>


<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dalyvio junginiai â€“ giminÄ—, skaiÄius, linksnis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'OpenDyslexic', Arial, sans-serif;
            letter-spacing: 0.05em;
            background-color: #E8F4F8;
            line-height: 2.2; /* buvo 1.9 â€“ ~+15% */
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .page-wrapper {
            width: 100%;
            max-width: 1000px;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 24px;
            background-color: #93c5fd;
            color: #1e3a8a;
            text-decoration: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            transition: background-color 0.3s;
            white-space: nowrap;
        }
        .back-btn:hover { background-color: #7CB3E9; }

        .student-info {
            background-color: #ffffff;
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid #4A90E2;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-grow: 1;
            gap: 10px;
        }

        .change-name-btn {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'OpenDyslexic', Arial, sans-serif;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .change-name-btn:hover { background-color: #0D3B66; }

        .card {
            width: 100%;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(26, 77, 122, 0.15);
            padding: 30px;
            border: 3px solid #4A90E2;
        }

        .intro-text {
            font-size: 1.9rem;
            font-weight: bold;
            color: #0D3B66;
            margin-bottom: 20px;
            text-align: center;
        }

        .intro-content {
            font-size: 1.1rem;
            color: #1A4D7A;
            line-height: 2.2; /* buvo 1.9 */
        }
        .intro-content ul {
            margin-top: 15px;
            padding-left: 25px;
            list-style: disc;
        }
        .intro-content li { margin-bottom: 10px; }

        .text-block {
            background-color: #E8F4F8;
            border-radius: 12px;
            border: 2px solid #7CB3E9;
            padding: 24px;
            margin-top: 20px;
            font-size: 1.1rem;
            line-height: 2.2; /* buvo 1.9 */
            color: #1A4D7A;
        }

        .highlight {
            background-color: #fff9c4;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
        }

        .table-wrapper {
            margin-top: 30px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1rem;
            line-height: 2.0; /* Å¡iek tiek didesnis tarpas tarp eiluÄiÅ³ lentelÄ—je */
        }
        th, td {
            border: 1px solid #cbd5e1;
            padding: 12px 8px; /* truputÄ¯ daugiau vertikalaus tarpo */
            text-align: left;
        }
        th {
            background-color: #DBEAFE;
            color: #1e3a8a;
            font-weight: 700;
            text-align: center;
        }
        td:first-child, td:nth-child(2) {
            font-weight: 600;
        }

        select {
            width: 100%;
            padding: 6px 4px;
            border-radius: 6px;
            border: 1px solid #93c5fd;
            font-family: 'OpenDyslexic', Arial, sans-serif;
            background-color: #ffffff;
        }

        .cell-correct {
            background-color: #d4edda !important;
            border-color: #27ae60 !important;
        }
        .cell-incorrect {
            background-color: #f8d7da !important;
            border-color: #e74c3c !important;
        }

        .feedback-text {
            margin-top: 18px;
            font-size: 1rem;
            color: #1A4D7A;
        }

        .result-container {
            text-align: center;
            margin-top: 25px;
            font-size: 1.4rem;
            font-weight: bold;
            color: #1A4D7A;
            padding: 18px;
            background-color: #E8F4F8;
            border-radius: 10px;
            border: 3px solid #4ECDC4;
        }

        @media (max-width: 768px) {
            .intro-text { font-size: 1.6rem; }
            .card { padding: 22px; }
            .header-container {
                flex-direction: column;
                align-items: stretch;
            }
            .back-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
<div class="page-wrapper">

    <div class="header-container">
        <a href="/Mokyklai/" class="back-btn">â† GrÄ¯Å¾ti Ä¯ pradÅ¾iÄ…</a>
        <div class="student-info">
            <span style="font-size: 18px; color: #1A4D7A;">
                Mokinys: <strong id="studentNameDisplay"></strong>
            </span>
            <button class="change-name-btn" onclick="changeName()">Keisti vardÄ…</button>
        </div>
    </div>

    <!-- VIENA KORTELÄ–: INSTRUKCIJA + UÅ½DUOTIS -->
    <div class="card">
        <h2 class="intro-text">Dalyvio junginiai: giminÄ—, skaiÄius, linksnis</h2>

        <div class="intro-content">
            <p>Å ioje uÅ¾duotyje mokysiesi atpaÅ¾inti <strong>dalyvio ir daiktavardÅ¾io junginius</strong> ir nustatyti jÅ³ <strong>giminÄ™, skaiÄiÅ³ ir linksnÄ¯</strong>.</p>
            <ul>
                <li>ğŸ“– Perskaityk visÄ… tekstÄ… Å¾emiau.</li>
                <li>ğŸŸ¡ Tekste paryÅ¡kinti <strong>dalyvio junginiai</strong> (dalyvis + daiktavardis).</li>
                <li>ğŸ“‹ LentelÄ—je po tekstu kiekvienam junginiui parink:
                    <ul>
                        <li>GiminÄ™: <em>vyriÅ¡koji / moteriÅ¡koji</em></li>
                        <li>SkaiÄiÅ³: <em>vienaskaita / daugiskaita</em></li>
                        <li>LinksnÄ¯ su klausimu: <em>vardininkas (Kas?), kilmininkas (Ko?) ir t. t.</em></li>
                    </ul>
                </li>
                <li>âœ… Pabaigoje paspausk â€Pasitikrintiâ€œ ir paÅ¾iÅ«rÄ—k, kaip sekÄ—si.</li>
            </ul>
        </div>

        <div class="text-block">
            <p><strong>BalandÅ¾io 25 d.</strong></p>
            <p>
                1. Ties bunkerio anga auga ieva ilgomis
                <span class="highlight">nukarusiomis Å¡akomis</span>. 
                2. Sprogsta lapai. 
                3. VasarÄ… bunkeris visiÅ¡kai uÅ¾dengiamas 
                <span class="highlight">suÅ¾aliavusiais lapais</span>. 
                4. KeletÄ… metrÅ³ Å¾emiau matai 
                <span class="highlight">vingiuojantÄ¯ upelÄ¯</span>. 
                5. Jo abu krantai apaugÄ™ 
                <span class="highlight">susipynusiais krÅ«mais</span> ir nubarstyti 
                <span class="highlight">Å¾ydinÄiomis Å¾ibutÄ—mis</span>. 
                6. Å itas bunkeris â€“ tikra vasarvietÄ—. 
                7. Deja, mes juo negalime pasidÅ¾iaugti. 
                8. Turime tenkintis tuo, kad pro maÅ¾Ä… angos plyÅ¡elÄ¯ matome ievos Å¡akelÄ™, keletÄ… 
                <span class="highlight">prasiverÅ¾ianÄiÅ³ spinduliÅ³</span> ir girdime lazdynÅ³ krÅ«muose 
                <span class="highlight">ÄiulbanÄius paukÅ¡Äius</span> ir 
                <span class="highlight">ÄiurlenantÄ¯ upelÄ¯</span>.
            </p>
            <p style="text-align:right; margin-top:10px; font-size:0.9rem;"><em>(Pagal LionginÄ… BaliukeviÄiÅ³-DzÅ«kÄ…)</em></p>
        </div>

        <div class="table-wrapper">
            <table id="junction-table">
                <thead>
                <tr>
                    <th>Nr.</th>
                    <th>Å½odÅ¾iÅ³ junginys</th>
                    <th>GiminÄ—</th>
                    <th>SkaiÄius</th>
                    <th>Linksnis</th>
                </tr>
                </thead>
                <tbody>
                <!-- EilutÄ—s sugeneruojamos JS -->
                </tbody>
            </table>
        </div>

        <div class="feedback-text" id="feedback-area"></div>

        <div style="text-align:center; margin-top:22px;">
            <button onclick="checkTable()" class="change-name-btn" style="font-size:1.1rem; padding:12px 28px;">
                âœ… Pasitikrinti
            </button>
        </div>

        <div id="result-box" class="result-container" style="display:none;"></div>
    </div>

</div>

<script>
    // --- VardÅ³ valdymas ---
    function showNamePrompt() {
        const studentName = localStorage.getItem('studentName');
        if (!studentName) {
            const name = prompt('Ä®vesk savo vardÄ…:');
            if (name && name.trim() !== '') {
                localStorage.setItem('studentName', name.trim());
                return name.trim();
            } else {
                alert('PraÅ¡ome Ä¯vesti vardÄ…, kad galÄ—tumÄ—te pradÄ—ti uÅ¾duotÄ¯.');
                return showNamePrompt();
            }
        }
        return studentName;
    }

    function changeName() {
        localStorage.removeItem('studentName');
        const newName = showNamePrompt();
        alert(`Vardas pakeistas Ä¯: \${newName}`);
        location.reload();
    }

    function sendResultToSheet(taskName, score) {
        const studentName = localStorage.getItem('studentName') || 'NeÅ¾inomas';
        const timestamp = new Date().toLocaleString('lt-LT');

        const data = {
            name: studentName,
            task: taskName,
            score: score,
            timestamp: timestamp
        };

        fetch('https://script.google.com/macros/s/AKfycbzhXP3hJ6NBLOld6Gbg-tlN-Tk8BPoxx32tx9j-iKCJChVyeOpZiDyGu9g2cm6Vl0uf/exec', {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        }).then(() => {
            console.log('Rezultatas sÄ—kmingai iÅ¡siÅ³stas Ä¯ Google Sheets! âœ…');
        }).catch(error => {
            console.error('Klaida siunÄiant rezultatÄ…:', error);
        });
    }

    const studentName = showNamePrompt();
    document.getElementById('studentNameDisplay').textContent = studentName;

    // --- DUOMENYS APIE JUNGINIUS ---
    const JUNCTIONS = [
        { id: 1, text: "nukarusiomis Å¡akomis", gender: "moteriÅ¡koji", number: "daugiskaita", kase: "Ä¯nagininkas (Kuo?)" },
        { id: 2, text: "suÅ¾aliavusiais lapais", gender: "vyriÅ¡koji", number: "daugiskaita", kase: "Ä¯nagininkas (Kuo?)" },
        { id: 3, text: "vingiuojantÄ¯ upelÄ¯", gender: "vyriÅ¡koji", number: "vienaskaita", kase: "galininkas (KÄ…?)" },
        { id: 4, text: "susipynusiais krÅ«mais", gender: "vyriÅ¡koji", number: "daugiskaita", kase: "Ä¯nagininkas (Kuo?)" },
        { id: 5, text: "Å¾ydinÄiomis Å¾ibutÄ—mis", gender: "moteriÅ¡koji", number: "daugiskaita", kase: "Ä¯nagininkas (Kuo?)" },
        { id: 6, text: "prasiverÅ¾ianÄiÅ³ spinduliÅ³", gender: "vyriÅ¡koji", number: "daugiskaita", kase: "kilmininkas (Ko?)" },
        { id: 7, text: "ÄiulbanÄius paukÅ¡Äius", gender: "vyriÅ¡koji", number: "daugiskaita", kase: "galininkas (KÄ…?)" },
        { id: 8, text: "ÄiurlenantÄ¯ upelÄ¯", gender: "vyriÅ¡koji", number: "vienaskaita", kase: "galininkas (KÄ…?)" }
    ];

    const GENDER_OPTIONS = ["", "vyriÅ¡koji", "moteriÅ¡koji"];
    const NUMBER_OPTIONS = ["", "vienaskaita", "daugiskaita"];
    const CASE_OPTIONS = [
        "",
        "vardininkas (Kas?)",
        "kilmininkas (Ko?)",
        "naudininkas (Kam?)",
        "galininkas (KÄ…?)",
        "Ä¯nagininkas (Kuo?)",
        "vietininkas (Kur? Kame?)"
    ];

    // --- LentelÄ—s generavimas ---
    function buildTable() {
        const tbody = document.querySelector('#junction-table tbody');
        tbody.innerHTML = "";

        JUNCTIONS.forEach(j => {
            const tr = document.createElement('tr');

            const tdNr = document.createElement('td');
            tdNr.textContent = j.id;
            tr.appendChild(tdNr);

            const tdText = document.createElement('td');
            tdText.textContent = j.text;
            tr.appendChild(tdText);

            const tdGender = document.createElement('td');
            const selGender = document.createElement('select');
            selGender.id = `gender-\${j.id}`;
            GENDER_OPTIONS.forEach(opt => {
                const o = document.createElement('option');
                o.value = opt;
                o.textContent = opt === "" ? "Pasirink" : opt;
                selGender.appendChild(o);
            });
            tdGender.appendChild(selGender);
            tr.appendChild(tdGender);

            const tdNumber = document.createElement('td');
            const selNumber = document.createElement('select');
            selNumber.id = `number-\${j.id}`;
            NUMBER_OPTIONS.forEach(opt => {
                const o = document.createElement('option');
                o.value = opt;
                o.textContent = opt === "" ? "Pasirink" : opt;
                selNumber.appendChild(o);
            });
            tdNumber.appendChild(selNumber);
            tr.appendChild(tdNumber);

            const tdCase = document.createElement('td');
            const selCase = document.createElement('select');
            selCase.id = `case-\${j.id}`;
            CASE_OPTIONS.forEach(opt => {
                const o = document.createElement('option');
                o.value = opt;
                o.textContent = opt === "" ? "Pasirink" : opt;
                selCase.appendChild(o);
            });
            tdCase.appendChild(selCase);
            tr.appendChild(tdCase);

            tbody.appendChild(tr);
        });
    }

    // --- Tikrinimas ---
    function checkTable() {
        const feedbackArea = document.getElementById('feedback-area');
        const resultBox = document.getElementById('result-box');

        let totalFields = 0;
        let correctFields = 0;

        document.querySelectorAll('#junction-table td').forEach(td => {
            td.classList.remove('cell-correct', 'cell-incorrect');
        });

        JUNCTIONS.forEach(j => {
            const selGender = document.getElementById(`gender-${j.id}`);
            const selNumber = document.getElementById(`number-${j.id}`);
            const selCase   = document.getElementById(`case-${j.id}`);

            const tdGender = selGender.parentElement;
            const tdNumber = selNumber.parentElement;
            const tdCase   = selCase.parentElement;

            // GiminÄ—
            totalFields++;
            if (selGender.value === j.gender) {
                correctFields++;
                tdGender.classList.add('cell-correct');
            } else {
                tdGender.classList.add('cell-incorrect');
            }

            // SkaiÄius
            totalFields++;
            if (selNumber.value === j.number) {
                correctFields++;
                tdNumber.classList.add('cell-correct');
            } else {
                tdNumber.classList.add('cell-incorrect');
            }

            // Linksnis
            totalFields++;
            if (selCase.value === j.kase) {
                correctFields++;
                tdCase.classList.add('cell-correct');
            } else {
                tdCase.classList.add('cell-incorrect');
            }
        });

        const percentage = totalFields > 0 ? Math.round((correctFields / totalFields) * 100) : 0;

        feedbackArea.innerHTML = `
            TeisingÅ³ atsakymÅ³: <strong>${correctFields}</strong> iÅ¡ <strong>${totalFields}</strong> (${percentage}%).
        `;

        resultBox.style.display = 'block';
        resultBox.innerHTML = `
            <div>Bendras rezultatas:</div>
            <div style="font-size:2.2rem; margin-top:8px;">
                ${percentage}%
            </div>
        `;

        // SiunÄiame rezultatÄ… Ä¯ Google Sheets
        sendResultToSheet('L0XXX Dalyvio junginiai â€“ giminÄ—, skaiÄius, linksnis', percentage);
    }

    // --- Inicializacija ---
    window.onload = function () {
        buildTable();
    };
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daiktavard≈æio analizƒó - Kalbos Upƒó</title>
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        body {
            font-family: 'OpenDyslexic', Arial, sans-serif;
            background-color: #E8F4F8;
            margin: 0; padding: 20px; min-height: 100vh;
            display: flex; justify-content: center; align-items: flex-start;
        }
        .page-wrapper { width: 100%; max-width: 1000px; }
        .header-container {
            display: flex; justify-content: space-between; align-items: center;
            gap: 15px; margin-bottom: 16px; flex-wrap: wrap;
        }
        .back-btn {
            display: inline-flex; align-items: center;
            padding: 10px 20px; background-color: #7CB3E9; color: white;
            text-decoration: none; border-radius: 8px; font-size: 16px;
            transition: background-color 0.3s; white-space: nowrap;
        }
        .back-btn:hover { background-color: #4A90E2; }
        .student-info {
            background-color: #fff; padding: 10px 18px; border-radius: 10px;
            border: 2px solid #4A90E2; display: flex; gap: 10px; flex-grow: 1;
            align-items: center; justify-content: space-between; flex-wrap: wrap;
        }
        .change-name-btn {
            background-color: #4A90E2; color: white; border: none;
            padding: 8px 16px; border-radius: 8px; cursor: pointer;
            font-family: 'OpenDyslexic', Arial, sans-serif; font-size: 14px;
            transition: background-color 0.3s; white-space: nowrap;
        }
        .change-name-btn:hover { background-color: #0D3B66; }
        .card-container {
            width: 100%; background-color: #fff; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(26,77,122,0.15); padding: 24px 24px 20px;
            border: 3px solid #4A90E2; margin-bottom: 24px;
        }
        .card { display: none; }
        .card.active { display: block; }
        /* Vir≈°utinƒó u≈æduoties juosta */
        .task-top-bar {
            display: flex; justify-content: space-between; align-items: flex-start;
            margin-bottom: 12px; flex-wrap: wrap;
        }
        .instructions {
            font-size: 1rem; color: #1A4D7A; margin: 0; font-weight: 500;
        }
        .instructions span.icon { display: inline-block; width: 22px; }
        .card-badge {
            background-color: #ffeb3b; color: #1b5e20;
            padding: 4px 10px; border-radius: 6px; font-weight: bold;
            font-size: 1rem; white-space: nowrap; margin-left: 10px; margin-top: 2px;
        }
        .quiz-card h2 { text-align: center; color: #0D3B66; font-size: 1.7rem; margin-bottom: 10px; }
        #word-display {
            font-size: 2.2rem; font-weight: bold; color: #4A90E2;
            margin: 15px auto 20px; padding: 12px; border-bottom: 3px solid #4A90E2; text-align: center;
        }
        .criteria-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 18px; margin-bottom: 18px; text-align: left;
        }
        .column {
            background-color: #E8F4F8; padding: 12px; border-radius: 10px;
            border: 2px solid #7CB3E9;
        }
        .column h3 {
            margin-top: 0; color: #0D3B66; font-size: 1.1rem; margin-bottom: 8px;
            border-bottom: 2px solid #7CB3E9; padding-bottom: 3px;
        }
        label {
            display: block; background-color: #fff; padding: 8px; margin: 8px 0;
            border-radius: 8px; cursor: pointer; transition: all 0.3s; font-weight: 500;
            font-size: 1rem; border: 2px solid #7CB3E9; color: #1A4D7A;
        }
        label:hover { background-color: #D4E9F7; transform: translateY(-1px); }
        input[type="radio"] { margin-right: 8px; }
        .correct { background-color: #d4edda !important; color: #155724 !important; border-color: #27ae60 !important; }
        .incorrect { background-color: #f8d7da !important; color: #721c24 !important; border-color: #e74c3c !important; }
        .button-group { display: flex; justify-content: center; gap: 15px; margin-top: 10px; }
        button {
            padding: 13px 30px; font-size: 1.15rem; font-weight: bold; border: none;
            border-radius: 10px; cursor: pointer; transition: all 0.3s;
            font-family: 'OpenDyslexic', Arial, sans-serif;
        }
        #check-btn { background: linear-gradient(135deg, #4ECDC4, #27ae60); color: white; }
        #check-btn:hover { transform: translateY(-2px); }
        #check-btn.continue { background: linear-gradient(135deg, #4A90E2, #0D3B66); }
        #message { margin-top: 10px; font-size: 1.15rem; font-weight: bold; min-height: 28px; text-align: center; }
        /* Atmintinƒó apaƒçioje */
        .cheatsheet-below { margin-top: 30px; }
        .cheatsheet-below h1 { text-align: center; color: #0D3B66; font-size: 1.2rem; margin-bottom: 10px; letter-spacing: 1px; }
        .section { border-radius: 10px; margin-bottom: 12px; padding: 10px; border-left: 6px solid; }
        .section-1 { border-left-color: #4CAF50; background-color: #e8f5e9; }
        .section-3 { border-left-color: #2196F3; background-color: #e3f2fd; }
        .section-4 { border-left-color: #9C27B0; background-color: #f3e5f5; }
        .section-5 { border-left-color: #F44336; background-color: #ffebee; }
        .category-box { background-color: rgba(255,255,255,0.9); padding: 7px 8px; border-radius: 7px; margin-bottom: 4px; font-size: 1rem; font-weight: bold; color: #1A4D7A; }
        .example { font-weight: normal; color: #555; font-size: 0.93rem; }
        .linksniu-lentele { width: 100%; border-collapse: collapse; text-align: left; margin-top: 6px; }
        .linksniu-lentele th, .linksniu-lentele td { border: 1px solid #ccc; padding: 7px; font-size: 0.97rem; }
        .linksniu-lentele th { background-color: #F44336; color: white; font-weight: bold; }
        .linksniu-lentele td:nth-child(2) { font-weight: bold; }
        /* Rezultat≈≥ stiliai */
        .results-content { text-align: center; }
        .results-content h2 { font-size: 2.1rem; color: #0D3B66; margin-bottom: 25px; }
        .score-display { font-size: 1.5rem; font-weight: bold; margin: 24px 0; padding: 12px; background-color: #E8F4F8; border-radius: 10px; border: 3px solid #4ECDC4; }
        .score-percentage { font-size: 2rem; font-weight: bold; margin-top: 14px; }
        @media (max-width: 768px) {
            .criteria-grid { grid-template-columns: 1fr; }
            #word-display { font-size: 1.3rem; }
            .instructions { font-size: 0.98rem; }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <div class="header-container">
            <a href="../../index.html" class="back-btn">‚Üê GrƒØ≈æti ƒØ prad≈æiƒÖ</a>
            <div class="student-info">
                <span style="font-size: 16px; color: #1A4D7A;">Mokinys: <strong id="studentNameDisplay"></strong></span>
                <button class="change-name-btn" onclick="changeName()">Keisti vardƒÖ</button>
            </div>
        </div>
        <div class="card-container">
            <!-- KORTELƒñS: U≈ΩDUOTIS -->
            <div id="quiz-card" class="card quiz-card active">
        <div class="task-top-bar">
        <div class="instructions">
        <div><span class="icon">üëÄ</span> <b>Perskaityk</b> daiktavardƒØ.</div>
        <div><span class="icon">üìù</span> <b>Pa≈æymƒók</b> giminƒô, skaiƒçi≈≥ ir linksnƒØ.</div>
        <div><span class="icon">‚úÖ</span> Spausk ‚ÄûPasitikrinti‚Äú.</div>
        </div>
        <div class="card-badge" id="card-badge"></div>
        </div>
                <div id="word-display">≈Ωodis</div>
                <div class="criteria-grid" id="quiz-options">
                    <div class="column">
                        <h3>1) GIMINƒñ</h3>
                        <label><input type="radio" name="gimine" value="vyriska"> vyri≈°koji</label>
                        <label><input type="radio" name="gimine" value="moteriska"> moteri≈°koji</label>
                    </div>
                    <div class="column">
                        <h3>2) SKAIƒåIUS</h3>
                        <label><input type="radio" name="skaicius" value="vienaskaita"> vienaskaita</label>
                        <label><input type="radio" name="skaicius" value="daugiskaita"> daugiskaita</label>
                    </div>
                    <div class="column">
                        <h3>3) LINKSNIS</h3>
                        <label><input type="radio" name="linksmas" value="vardininkas"> Vardininkas (KAS?)</label>
                        <label><input type="radio" name="linksmas" value="kilmininkas"> Kilmininkas (KO?)</label>
                        <label><input type="radio" name="linksmas" value="naudininikas"> Naudininkas (KAM?)</label>
                        <label><input type="radio" name="linksmas" value="galininkas"> Galininkas (KƒÑ?)</label>
                        <label><input type="radio" name="linksmas" value="inagininkas"> ƒÆnagininkas (KUO?)</label>
                        <label><input type="radio" name="linksmas" value="vietininkas"> Vietininkas (KUR? KAME?)</label>
                        <label><input type="radio" name="linksmas" value="sauksmininkas"> ≈†auksmininkas (EI!)</label>
                    </div>
                </div>
                <div id="message"></div>
                <div class="button-group">
                    <button id="check-btn" onclick="checkAnswer()">‚úÖ Pasitikrinti</button>
                </div>
                <!-- ATMINTINƒñ APAƒåIOJE -->
                <div class="cheatsheet-below">
                    <h1>üìö ATMINTINƒñ</h1>
                    <div class="section section-1">
                        <b>Daiktavardis</b> ‚Äì ≈æodis, rei≈°kiantis gyvƒÖ asmenƒØ (≈æmogus), daiktƒÖ (stalas), rei≈°kinƒØ/b≈´senƒÖ (lietus).
                    </div>
                    <div class="section section-3">
                        <b>GIMINƒñ:</b> vyri≈°koji (stalas), moteri≈°koji (knyga)
                    </div>
                    <div class="section section-4">
                        <b>SKAIƒåIUS:</b> vienaskaita (brolis), daugiskaita (broliai)
                    </div>
                    <div class="section section-5">
                        <b>LINKSNIAI:</b>
                        <table class="linksniu-lentele">
                            <thead>
                                <tr>
                                    <th>Linksnis</th>
                                    <th>Klausimas</th>
                                    <th>Pavyzdys</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>Vardininkas</td><td>KAS?</td><td>Stalas</td></tr>
                                <tr><td>Kilmininkas</td><td>KO?</td><td>Stalo</td></tr>
                                <tr><td>Naudininkas</td><td>KAM?</td><td>Stalui</td></tr>
                                <tr><td>Galininkas</td><td>KƒÑ?</td><td>StalƒÖ</td></tr>
                                <tr><td>ƒÆnagininkas</td><td>KUO?</td><td>Stalu</td></tr>
                                <tr><td>Vietininkas</td><td>KUR? KAME?</td><td>Stale</td></tr>
                                <tr><td>≈†auksmininkas</td><td>EI!</td><td>Stale!</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!-- KORTELƒñ: REZULTATAI -->
            <div id="results-card" class="card results-content">
                <h2>üéâ U≈æduoties rezultatai</h2>
                <div id="results-details"></div>
                <div class="button-group">
                    <button onclick="location.reload()" style="background: linear-gradient(135deg, #4ECDC4, #27ae60); color: white;">üîÑ Pradƒóti i≈° naujo</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        // --- Vard≈≥ valdymas ---
        function showNamePrompt() {
            const studentName = localStorage.getItem('studentName');
            if (!studentName) {
                const name = prompt('ƒÆvesk savo vardƒÖ:');
                if (name && name.trim() !== '') {
                    localStorage.setItem('studentName', name.trim());
                    return name.trim();
                } else {
                    alert('Pra≈°ome ƒØvesti vardƒÖ, kad galƒótumƒóte pradƒóti u≈æduotƒØ.');
                    return showNamePrompt();
                }
            }
            return studentName;
        }
        function changeName() {
            localStorage.removeItem('studentName');
            const newName = showNamePrompt();
            alert(`Vardas pakeistas ƒØ: \${newName}`);
            location.reload();
        }
        function sendResultToSheet(taskName, score) {
            const studentName = localStorage.getItem('studentName') || 'Ne≈æinomas';
            const timestamp = new Date().toLocaleString('lt-LT');
            const data = { name: studentName, task: taskName, score: score, timestamp: timestamp };
            fetch('https://script.google.com/macros/s/AKfycbzhXP3hJ6NBLOld6Gbg-tlN-Tk8BPoxx32tx9j-iKCJChVyeOpZiDyGu9g2cm6Vl0uf/exec', {
                method: 'POST', mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
        }
        const studentName = showNamePrompt();
        document.getElementById('studentNameDisplay').textContent = studentName;
        // --- U≈ΩDUOƒåI≈≤ DUOMENYS ---
        const questions = [
            { word: "ƒÑ≈ΩUOLƒÑ", answers: { gimine: "vyriska", skaicius: "vienaskaita", linksmas: "galininkas" } },
            { word: "PJUVENA", answers: { gimine: "moteriska", skaicius: "vienaskaita", linksmas: "vardininkas" } },
            { word: "MƒÆSLI≈≤", answers: { gimine: "moteriska", skaicius: "daugiskaita", linksmas: "kilmininkas" } },
            { word: "≈†AKNIMI", answers: { gimine: "moteriska", skaicius: "vienaskaita", linksmas: "inagininkas" } },
            { word: "JAUTIS", answers: { gimine: "vyriska", skaicius: "vienaskaita", linksmas: "vardininkas" } },
            { word: "PJESƒñSE", answers: { gimine: "moteriska", skaicius: "daugiskaita", linksmas: "vietininkas" } },
            { word: "ƒÑSOƒåIU", answers: { gimine: "vyriska", skaicius: "vienaskaita", linksmas: "inagininkas" } },
            { word: "PJ≈™VI≈≤", answers: { gimine: "vyriska", skaicius: "daugiskaita", linksmas: "kilmininkas" } },
            { word: "KƒòSTUTI!", answers: { gimine: "vyriska", skaicius: "vienaskaita", linksmas: "sauksmininkas" } },
            { word: "STALUOSE", answers: { gimine: "vyriska", skaicius: "daugiskaita", linksmas: "vietininkas" } }
        ];

        let currentQuestionIndex = 0;
        let isChecked = false;
        let totalCorrectQuizzes = 0;
        let quizResults = [];

        const wordDisplay = document.getElementById('word-display');
        const checkBtn = document.getElementById('check-btn');
        const messageDiv = document.getElementById('message');
        const quizTitle = document.getElementById('quiz-title');
        const cardBadge = document.getElementById('card-badge');
        const criteriaNames = ['gimine', 'skaicius', 'linksmas'];

        // Pradinis u≈ækrovimas
        loadQuestion();

        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }
            const currentQ = questions[currentQuestionIndex];
            wordDisplay.textContent = currentQ.word;
            quizTitle.textContent = "Daiktavard≈æio analizƒó";
            cardBadge.textContent = `${currentQuestionIndex + 1} / ${questions.length} kortelƒó`;

            messageDiv.textContent = "";
            isChecked = false;
            checkBtn.textContent = "‚úÖ Pasitikrinti";
            checkBtn.classList.remove('continue');

            // Atstatome radijo mygtukus
            const allRadios = document.querySelectorAll('input[type="radio"]');
            allRadios.forEach(radio => {
                radio.checked = false;
                radio.disabled = false;
                radio.parentNode.classList.remove('correct', 'incorrect');
            });
        }

        function checkAnswer() {
            if (isChecked) {
                // Mygtukas veikia kaip 'Toliau'
                currentQuestionIndex++;
                loadQuestion();
                return;
            }

            const currentQ = questions[currentQuestionIndex];
            let allCorrect = true;
            let correctCount = 0;

            criteriaNames.forEach(criteria => {
                const selected = document.querySelector(`input[name="${criteria}"]:checked`);
                const correctAnswer = currentQ.answers[criteria];
                const radios = document.querySelectorAll(`input[name="${criteria}"]`);
                radios.forEach(radio => {
                    const label = radio.parentNode;
                    radio.disabled = true;
                    if (radio.value === correctAnswer) {
                        label.classList.add('correct');
                    } else if (selected && radio.value === selected.value) {
                        label.classList.add('incorrect');
                        allCorrect = false;
                    }
                });
                if (selected && selected.value === correctAnswer) {
                    correctCount++;
                } else {
                    allCorrect = false;
                }
            });

            // GrƒØ≈ætamasis ry≈°ys
            if (allCorrect) {
                messageDiv.textContent = `≈†aunu! Visi 3 atsakymai teisingi! ‚úÖ`;
                messageDiv.style.color = '#27ae60';
                totalCorrectQuizzes++;
                quizResults.push(true);
            } else {
                messageDiv.textContent = `Atsakei teisingai ƒØ ${correctCount}/3 kriterijus. Per≈æi≈´rƒók teisingus atsakymus (≈æalios spalvos).`;
                messageDiv.style.color = '#e74c3c';
                quizResults.push(false);
            }
            isChecked = true;
            checkBtn.textContent = currentQuestionIndex === questions.length - 1 ? "üèÅ Rezultatai" : "‚û°Ô∏è Toliau";
            checkBtn.classList.add('continue');
        }

        function showResults() {
            document.getElementById('quiz-card').classList.remove('active');
            document.getElementById('results-card').classList.add('active');

            const totalQuestions = questions.length;
            const scorePercentage = Math.round((totalCorrectQuizzes / totalQuestions) * 100);

            let resultsHTML = '<div style="margin: 20px 0;">';
            questions.forEach((q, index) => {
                const resultText = quizResults[index] ? '‚úîÔ∏è Teisingai (3/3)' : '‚ùå Neteisingai';
                const resultColor = quizResults[index] ? '#27ae60' : '#e74c3c';
                resultsHTML += `
                    <div style="padding: 12px; margin: 8px 0; background-color: #E8F4F8; border-radius: 8px; border-left: 4px solid ${resultColor};">
                        <strong>${q.word}</strong>: <span style="color: ${resultColor}; font-weight: bold;">${resultText}</span>
                    </div>
                `;
            });
            resultsHTML += '</div>';
            resultsHTML += `
                <div class="score-display">
                    <div style="font-size: 1.2rem; color: #1A4D7A;">
                        Teisingai atsakyta: <strong>${totalCorrectQuizzes} i≈° ${totalQuestions}</strong>
                    </div>
                    <div class="score-percentage" style="color: ${scorePercentage >= 70 ? '#27ae60' : '#e74c3c'};">
                        ${scorePercentage}%
                    </div>
                </div>
            `;
            document.getElementById('results-details').innerHTML = resultsHTML;

            // Si≈≥sti rezultatus ƒØ Google Sheets
            sendResultToSheet('L0006 Daiktavardis: parink giminƒô, skaiƒçi≈≥, linksnƒØ', scorePercentage);
        }
    </script>
</body>
</html>


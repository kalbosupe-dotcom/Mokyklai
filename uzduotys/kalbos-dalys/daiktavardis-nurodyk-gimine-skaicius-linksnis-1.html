<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daiktavard≈æio analizƒó - Kalbos Upƒó</title>
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        body {
            font-family: 'OpenDyslexic', Arial, sans-serif;
            letter-spacing: 0.05em;
            background-color: #E8F4F8;
            line-height: 1.8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .page-wrapper {
            width: 100%;
            max-width: 1000px;
        }

        .back-btn {
            display: inline-block;
            margin-bottom: 20px;
            padding: 12px 24px;
            background-color: #7CB3E9;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 18px;
            transition: background-color 0.3s;
        }
        
        .back-btn:hover {
            background-color: #4A90E2;
        }
        
        .student-info {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #4A90E2;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .change-name-btn {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'OpenDyslexic', Arial, sans-serif;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .change-name-btn:hover {
            background-color: #0D3B66;
        }

        .card-container {
            width: 100%;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(26, 77, 122, 0.15);
            padding: 30px;
            border: 3px solid #4A90E2;
        }

        .card {
            display: none;
        }

        .card.active {
            display: block;
        }

        /* ATMINTINƒñS STILIAI */
        .cheatsheet h1 {
            text-align: center;
            color: #0D3B66;
            font-size: 2.2rem;
            margin-bottom: 30px;
            letter-spacing: 2px;
        }

        .section {
            border-radius: 10px;
            margin-bottom: 25px;
            padding: 15px;
            border-left: 8px solid;
        }

        .section h2 {
            margin-top: 0;
            font-size: 1.4rem;
            letter-spacing: 0.5px;
            color: #0D3B66;
        }

        .category-box {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            color: #1A4D7A;
        }

        .example {
            font-weight: normal;
            color: #555;
            font-size: 0.95rem;
        }

        .section-1 { border-left-color: #4CAF50; background-color: #e8f5e9; }
        .section-2 { border-left-color: #FF9800; background-color: #fff3e0; }
        .section-3 { border-left-color: #2196F3; background-color: #e3f2fd; }
        .section-4 { border-left-color: #9C27B0; background-color: #f3e5f5; }
        .section-5 { border-left-color: #F44336; background-color: #ffebee; }

        .linksniu-lentele {
            width: 100%;
            border-collapse: collapse;
            text-align: left;
            margin-top: 10px;
        }

        .linksniu-lentele th, .linksniu-lentele td {
            border: 1px solid #ccc;
            padding: 10px;
            font-size: 1rem;
        }

        .linksniu-lentele th {
            background-color: #F44336;
            color: white;
            font-weight: bold;
        }

        .linksniu-lentele td:nth-child(2) {
            font-weight: bold;
        }

        /* U≈ΩDUOTIES STILIAI */
        .quiz-card h2 {
            text-align: center;
            color: #0D3B66;
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        #word-display {
            font-size: 2.5rem;
            font-weight: bold;
            color: #4A90E2;
            margin-bottom: 25px;
            padding: 15px;
            border-bottom: 3px solid #4A90E2;
            text-align: center;
        }

        .criteria-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            text-align: left;
        }

        .column {
            background-color: #E8F4F8;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #7CB3E9;
        }

        .column h3 {
            margin-top: 0;
            color: #0D3B66;
            font-size: 1.2rem;
            margin-bottom: 10px;
            border-bottom: 2px solid #7CB3E9;
            padding-bottom: 5px;
        }

        label {
            display: block;
            background-color: #ffffff;
            padding: 10px;
            margin: 8px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            font-size: 1rem;
            border: 2px solid #7CB3E9;
            color: #1A4D7A;
        }

        label:hover {
            background-color: #D4E9F7;
            transform: translateY(-1px);
        }

        input[type="radio"] {
            margin-right: 8px;
        }
        
        .correct {
            background-color: #d4edda !important;
            color: #155724 !important;
            border-color: #27ae60 !important;
        }

        .incorrect {
            background-color: #f8d7da !important;
            color: #721c24 !important;
            border-color: #e74c3c !important;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            padding: 15px 35px;
            font-size: 1.3rem;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'OpenDyslexic', Arial, sans-serif;
        }

        #check-btn {
            background: linear-gradient(135deg, #4ECDC4, #27ae60);
            color: white;
        }
        
        #check-btn:hover {
            transform: translateY(-2px);
        }

        #check-btn.continue {
            background: linear-gradient(135deg, #4A90E2, #0D3B66);
        }

        #start-quiz-btn {
            background: linear-gradient(135deg, #4A90E2, #0D3B66);
            color: white;
        }

        #start-quiz-btn:hover {
            transform: translateY(-2px);
        }

        #message {
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            min-height: 30px;
            text-align: center;
        }

        /* REZULTAT≈≤ STILIAI */
        .results-content {
            text-align: center;
        }

        .results-content h2 {
            font-size: 2.2rem;
            color: #0D3B66;
            margin-bottom: 30px;
        }

        .score-display {
            font-size: 2rem;
            font-weight: bold;
            margin: 30px 0;
            padding: 20px;
            background-color: #E8F4F8;
            border-radius: 10px;
            border: 3px solid #4ECDC4;
        }

        .score-percentage {
            font-size: 2.5rem;
            font-weight: bold;
            margin-top: 20px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .criteria-grid {
                grid-template-columns: 1fr;
            }

            #word-display {
                font-size: 2rem;
            }

            .cheatsheet h1 {
                font-size: 1.8rem;
            }

            .section h2 {
                font-size: 1.2rem;
            }

            label {
                font-size: 0.9rem;
                padding: 8px;
            }

            button {
                font-size: 1.1rem;
                padding: 12px 25px;
            }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <a href="../../index.html" class="back-btn">‚Üê GrƒØ≈æti ƒØ prad≈æiƒÖ</a>
        
        <div class="student-info">
            <span style="font-size: 18px; color: #1A4D7A;">
                Mokinys: <strong id="studentNameDisplay"></strong>
            </span>
            <button class="change-name-btn" onclick="changeName()">Keisti vardƒÖ</button>
        </div>

        <div class="card-container">
            <!-- KORTELƒñ 1: ATMINTINƒñ -->
            <div id="cheatsheet-card" class="card active cheatsheet">
                <h1>üìö DAIKTAVARDIS - ATMINTINƒñ</h1>

                <div class="section section-1">
                    <h2>1. ATPA≈ΩINIMAS (KAS TAI?)</h2>
                    <p>Daiktavardis ‚Äì tai ≈æodis, kuris rei≈°kia:</p>
                    <div class="category-box" style="background-color: #dcedc8;">
                        <span>GYVUS asmenis: <span class="example">≈æmogus, mama, vaikas</span></span>
                    </div>
                    <div class="category-box" style="background-color: #dcedc8;">
                        <span>NEGYVUS daiktus: <span class="example">stalas, akmuo, knyga</span></span>
                    </div>
                    <div class="category-box" style="background-color: #dcedc8;">
                        <span>REI≈†KINIUS / B≈™SENAS: <span class="example">lietus, karas, meilƒó</span></span>
                    </div>
                </div>

                <div class="section section-2">
                    <h2>2. DAIKTAVARD≈ΩI≈≤ R≈™≈†YS (Klasifikacija)</h2>
                    <div class="category-box" style="background-color: #ffecb3;">
                        <span>KONKRET≈™S: <span class="example">Galima paliesti / pamatyti (knyga, namas)</span></span>
                    </div>
                    <div class="category-box" style="background-color: #ffecb3;">
                        <span>ABSTRAKT≈™S: <span class="example">Galima justi / negalima paliesti (d≈æiaugsmas, tiesa)</span></span>
                    </div>
                </div>

                <div class="section section-3">
                    <h2>3. GIMINƒñ</h2>
                    <div class="category-box" style="background-color: #bbdefb;">
                        <span>VYRI≈†KOJI (Vyr. g.): <span class="example">stalas, vaikas, jautis</span></span>
                    </div>
                    <div class="category-box" style="background-color: #bbdefb;">
                        <span>MOTERI≈†KOJI (Mot. g.): <span class="example">knyga, mama, ≈æuvis</span></span>
                    </div>
                </div>

                <div class="section section-4">
                    <h2>4. SKAIƒåIUS</h2>
                    <div class="category-box" style="background-color: #e1bee7;">
                        <span>VIENASKAITA: <span class="example">vienas daiktas (brolis)</span></span>
                    </div>
                    <div class="category-box" style="background-color: #e1bee7;">
                        <span>DAUGISKAITA: <span class="example">daug daikt≈≥ (stiklai)</span></span>
                    </div>
                </div>

                <div class="section section-5">
                    <h2>5. LINKSNIAI (7)</h2>
                    <p>Linksnio pavadinimas, klausimas ir pavyzdys:</p>
                    <table class="linksniu-lentele">
                        <thead>
                            <tr>
                                <th>Linksnis</th>
                                <th>Klausimas</th>
                                <th>Pavyzdys (vnsk. / dgsk.)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Vardininkas</td><td>KAS?</td><td>Stalas / Stalai</td></tr>
                            <tr><td>Kilmininkas</td><td>KO?</td><td>Stalo / Stal≈≥</td></tr>
                            <tr><td>Naudininkas</td><td>KAM?</td><td>Stalui / Stalams</td></tr>
                            <tr><td>Galininkas</td><td>KƒÑ?</td><td>StalƒÖ / Stalus</td></tr>
                            <tr><td>ƒÆnagininkas</td><td>KUO?</td><td>Stalu / Stalais</td></tr>
                            <tr><td>Vietininkas</td><td>KUR? KAME?</td><td>Stale / Staluose</td></tr>
                            <tr><td>≈†auksmininkas</td><td>EI!</td><td>Stale! / Stalai!</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="button-group">
                    <button id="start-quiz-btn" onclick="startQuiz()">‚ñ∂Ô∏è Pradƒóti u≈æduotƒØ</button>
                </div>
            </div>

            <!-- KORTELƒñS 2-11: U≈ΩDUOTYS -->
            <div id="quiz-card" class="card quiz-card">
                <h2 id="quiz-title">U≈æduotis 1 / 10</h2>
                <div id="word-display">≈Ωodis</div>
                
                <div class="criteria-grid" id="quiz-options">
                    <div class="column">
                        <h3>1) GIMINƒñ</h3>
                        <label><input type="radio" name="gimine" value="vyriska"> vyri≈°koji</label>
                        <label><input type="radio" name="gimine" value="moteriska"> moteri≈°koji</label>
                    </div>
                    
                    <div class="column">
                        <h3>2) SKAIƒåIUS</h3>
                        <label><input type="radio" name="skaicius" value="vienaskaita"> vienaskaita</label>
                        <label><input type="radio" name="skaicius" value="daugiskaita"> daugiskaita</label>
                    </div>
                    
                    <div class="column">
                        <h3>3) LINKSNIS</h3>
                        <label><input type="radio" name="linksmas" value="vardininkas"> Vardininkas (KAS?)</label>
                        <label><input type="radio" name="linksmas" value="kilmininkas"> Kilmininkas (KO?)</label>
                        <label><input type="radio" name="linksmas" value="naudininikas"> Naudininkas (KAM?)</label>
                        <label><input type="radio" name="linksmas" value="galininkas"> Galininkas (KƒÑ?)</label>
                        <label><input type="radio" name="linksmas" value="inagininkas"> ƒÆnagininkas (KUO?)</label>
                        <label><input type="radio" name="linksmas" value="vietininkas"> Vietininkas (KUR? / KAME?)</label>
                        <label><input type="radio" name="linksmas" value="sauksmininkas"> ≈†auksmininkas (EI!)</label>
                    </div>
                </div>
                
                <div id="message"></div>
                <div class="button-group">
                    <button id="check-btn" onclick="checkAnswer()">‚úÖ Pasitikrinti</button>
                </div>
            </div>

            <!-- KORTELƒñ 12: REZULTATAI -->
            <div id="results-card" class="card results-content">
                <h2>üéâ U≈æduoties rezultatai</h2>
                <div id="results-details"></div>
                <div class="button-group">
                    <button onclick="location.reload()" style="background: linear-gradient(135deg, #4ECDC4, #27ae60); color: white;">üîÑ Pradƒóti i≈° naujo</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        // --- Vard≈≥ valdymas ---
        function showNamePrompt() {
            const studentName = localStorage.getItem('studentName');
            
            if (!studentName) {
                const name = prompt('ƒÆvesk savo vardƒÖ:');
                if (name && name.trim() !== '') {
                    localStorage.setItem('studentName', name.trim());
                    return name.trim();
                } else {
                    alert('Pra≈°ome ƒØvesti vardƒÖ, kad galƒótumƒóte pradƒóti u≈æduotƒØ.');
                    return showNamePrompt();
                }
            }
            return studentName;
        }

        function changeName() {
            localStorage.removeItem('studentName');
            const newName = showNamePrompt();
            alert(`Vardas pakeistas ƒØ: ${newName}`);
            location.reload();
        }

        function sendResultToSheet(taskName, score) {
            const studentName = localStorage.getItem('studentName') || 'Ne≈æinomas';
            const timestamp = new Date().toLocaleString('lt-LT');
        
            const data = {
                name: studentName,
                task: taskName,
                score: score,
                timestamp: timestamp
            };
        
            console.log('Siunƒçiamas rezultatas:', data);
        
            fetch('https://script.google.com/macros/s/AKfycbzhXP3hJ6NBLOld6Gbg-tlN-Tk8BPoxx32tx9j-iKCJChVyeOpZiDyGu9g2cm6Vl0uf/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(() => {
                console.log('Rezultatas sƒókmingai i≈°si≈≥stas ƒØ Google Sheets! ‚úÖ');
            })
            .catch(error => {
                console.error('Klaida siunƒçiant rezultatƒÖ:', error);
            });
        }
        
        const studentName = showNamePrompt();
        document.getElementById('studentNameDisplay').textContent = studentName;

        // --- U≈ΩDUOƒåI≈≤ DUOMENYS ---
        const questions = [
            { word: "ƒÑ≈ΩUOLƒÑ", answers: { gimine: "vyriska", skaicius: "vienaskaita", linksmas: "galininkas" } },
            { word: "PJUVENA", answers: { gimine: "moteriska", skaicius: "vienaskaita", linksmas: "vardininkas" } },
            { word: "MƒÆSLI≈≤", answers: { gimine: "moteriska", skaicius: "daugiskaita", linksmas: "kilmininkas" } },
            { word: "≈†AKNIMI", answers: { gimine: "moteriska", skaicius: "vienaskaita", linksmas: "inagininkas" } },
            { word: "JAUTIS", answers: { gimine: "vyriska", skaicius: "vienaskaita", linksmas: "vardininkas" } },
            { word: "PJESƒñSE", answers: { gimine: "moteriska", skaicius: "daugiskaita", linksmas: "vietininkas" } },
            { word: "ƒÑSOƒåIU", answers: { gimine: "vyriska", skaicius: "vienaskaita", linksmas: "inagininkas" } },
            { word: "PJ≈™VI≈≤", answers: { gimine: "vyriska", skaicius: "daugiskaita", linksmas: "kilmininkas" } },
            { word: "KƒòSTUTI!", answers: { gimine: "vyriska", skaicius: "vienaskaita", linksmas: "sauksmininkas" } },
            { word: "STALUOSE", answers: { gimine: "vyriska", skaicius: "daugiskaita", linksmas: "vietininkas" } }
        ];

        let currentQuestionIndex = 0;
        let isChecked = false;
        let totalCorrectQuizzes = 0;
        let quizResults = [];

        const wordDisplay = document.getElementById('word-display');
        const checkBtn = document.getElementById('check-btn');
        const messageDiv = document.getElementById('message');
        const quizTitle = document.getElementById('quiz-title');

        const criteriaNames = ['gimine', 'skaicius', 'linksmas'];

        // Pradƒóti u≈æduotƒØ (pereiti i≈° atmintinƒós ƒØ u≈æduotis)
        function startQuiz() {
            document.getElementById('cheatsheet-card').classList.remove('active');
            document.getElementById('quiz-card').classList.add('active');
            loadQuestion();
        }

        // ƒÆkelti klausimƒÖ
        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }

            const currentQ = questions[currentQuestionIndex];
            wordDisplay.textContent = currentQ.word;
            quizTitle.textContent = `U≈æduotis ${currentQuestionIndex + 1} / ${questions.length}`;
            messageDiv.textContent = "";
            
            isChecked = false;
            checkBtn.textContent = "‚úÖ Pasitikrinti";
            checkBtn.classList.remove('continue');

            const allRadios = document.querySelectorAll('input[type="radio"]');
            allRadios.forEach(radio => {
                radio.checked = false;
                radio.disabled = false;
                radio.parentNode.classList.remove('correct', 'incorrect');
            });
        }

        // Tikrinti atsakymƒÖ
        function checkAnswer() {
            if (isChecked) {
                // Mygtukas veikia kaip 'Toliau'
                currentQuestionIndex++;
                loadQuestion();
                return;
            }

            const currentQ = questions[currentQuestionIndex];
            let allCorrect = true;
            let correctCount = 0;
            
            criteriaNames.forEach(criteria => {
                const selected = document.querySelector(`input[name="${criteria}"]:checked`);
                const correctAnswer = currentQ.answers[criteria];
                
                const radios = document.querySelectorAll(`input[name="${criteria}"]`);
                radios.forEach(radio => {
                    const label = radio.parentNode;
                    radio.disabled = true;

                    if (radio.value === correctAnswer) {
                        label.classList.add('correct');
                    } else if (selected && radio.value === selected.value) {
                        label.classList.add('incorrect');
                        allCorrect = false;
                    }
                });

                if (selected && selected.value === correctAnswer) {
                    correctCount++;
                } else {
                    allCorrect = false;
                }
            });

            // GrƒØ≈ætamasis ry≈°ys
            if (allCorrect) {
                messageDiv.textContent = `≈†aunu! Visi 3 atsakymai teisingi! ‚úÖ`;
                messageDiv.style.color = '#27ae60';
                totalCorrectQuizzes++;
                quizResults.push(true);
            } else {
                messageDiv.textContent = `Atsakei teisingai ƒØ ${correctCount}/3 kriterijus. Per≈æi≈´rƒók teisingus atsakymus (≈æalios spalvos).`;
                messageDiv.style.color = '#e74c3c';
                quizResults.push(false);
            }
            
            isChecked = true;
            checkBtn.textContent = currentQuestionIndex === questions.length - 1 ? "üèÅ Rezultatai" : "‚û°Ô∏è Toliau";
            checkBtn.classList.add('continue');
        }
        // Rodyti rezultatus
        function showResults() {
            document.getElementById('quiz-card').classList.remove('active');
            document.getElementById('results-card').classList.add('active');

            const totalQuestions = questions.length;
            const scorePercentage = Math.round((totalCorrectQuizzes / totalQuestions) * 100);

            let resultsHTML = '<div style="margin: 20px 0;">';
            
            questions.forEach((q, index) => {
                const resultText = quizResults[index] ? '‚úîÔ∏è Teisingai (3/3)' : '‚ùå Neteisingai';
                const resultColor = quizResults[index] ? '#27ae60' : '#e74c3c';
                resultsHTML += `
                    <div style="padding: 12px; margin: 8px 0; background-color: #E8F4F8; border-radius: 8px; border-left: 4px solid ${resultColor};">
                        <strong>${q.word}</strong>: <span style="color: ${resultColor}; font-weight: bold;">${resultText}</span>
                    </div>
                `;
            });

            resultsHTML += '</div>';

            resultsHTML += `
                <div class="score-display">
                    <div style="font-size: 1.5rem; color: #1A4D7A;">
                        Teisingai atsakyta: <strong>${totalCorrectQuizzes} i≈° ${totalQuestions}</strong>
                    </div>
                    <div class="score-percentage" style="color: ${scorePercentage >= 70 ? '#27ae60' : '#e74c3c'};">
                        ${scorePercentage}%
                    </div>
                </div>
            `;

            document.getElementById('results-details').innerHTML = resultsHTML;

            // Si≈≥sti rezultatus ƒØ Google Sheets
            sendResultToSheet('Daiktavardis: parink giminƒô, skaiƒçi≈≥, linksnƒØ', scorePercentage);
        }
    </script>
</body>
</html>

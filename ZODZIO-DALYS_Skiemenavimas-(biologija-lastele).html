<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>≈Ωod≈æi≈≥ skiemenavimo u≈æduotis (biologija-lƒÖstelƒó)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.05em;
        }
        .word-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: nowrap; /* U≈ΩTIKRINIMAS: neperkelti ≈æod≈æi≈≥ ƒØ kitƒÖ eilutƒô */
            white-space: nowrap; /* U≈ΩTIKRINIMAS: Neleisti l≈´≈æti ≈æod≈æiui */
        }
        .word-container span {
            transition: transform 0.2s ease-in-out;
        }
        /* PATAISYMAS: Padidinta paspaud≈æiama sritis tarp raid≈æi≈≥ */
        .word-container .divider {
            width: 15px; /* Pama≈æintas, kad tilpt≈≥ ilgesni ≈æod≈æiai */
            align-self: stretch;
            cursor: pointer;
            position: relative;
            border-radius: 6px;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .word-container .divider:hover {
            background-color: #dbeafe;
        }
        .word-container .divider.selected::after {
            content: '|';
            color: #3b82f6;
            font-weight: bold;
            font-size: 2.5rem;
            line-height: 1;
        }
        /* KOREKCIJA: Suma≈æintas ≈°riftas, kad tilpt≈≥ ilgesni ≈æod≈æiai ir b≈´t≈≥ platesnis kortelƒós vaizdas */
        .word-container-text {
             font-size: 3rem; 
        }
        @media (min-width: 640px) {
            .word-container-text {
                font-size: 4rem; /* Palikta ≈°iek tiek didesnƒó sm screens */
            }
        }
        .btn-disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-10 text-center">
        
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-1">≈Ωod≈æi≈≥ skiemenavimas</h1>
        <h2 class="text-xl sm:text-2xl font-semibold text-blue-600 mb-4">Biologija | LƒÖstelƒós sandara</h2>
        <p id="instruction" class="text-lg text-gray-600 mb-8">Paspausk tarp raid≈æi≈≥, kad pa≈æymƒótum, kur baigiasi skiemuo.</p>
        
        <div id="word-container" class="word-container word-container-text bg-gray-100 rounded-xl p-6 mb-8 font-bold text-gray-900 select-none min-h-[100px]">
            </div>

        <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
            <button id="check-btn" class="w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors duration-300">
                Tikrinti
            </button>
            <button id="next-btn" class="w-full sm:w-auto bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-lg text-lg transition-colors duration-300 hidden">
                Kitas ≈æodis
            </button>
        </div>

        <div id="feedback" class="mt-6 text-lg font-medium min-h-[50px]">
            </div>
        
        <div id="progress" class="mt-4 text-sm text-gray-500">
            ≈Ωodis 1 i≈° 10
        </div>

    </div>
    
    <div id="results-card" class="w-full max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 sm:p-10 text-center hidden mt-8">
        <h2 class="text-3xl font-bold text-gray-800 mb-4">U≈æduoties rezultatai</h2>
        <p id="final-score" class="text-4xl font-extrabold text-blue-600 mb-4"></p>
        <p id="accuracy" class="text-xl text-gray-700"></p>
        <button onclick="location.reload()" class="mt-6 w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors duration-300">
            Pradƒóti i≈° naujo
        </button>
    </div>


    <script>
        // --- Duomenys ---
        const words = [
            { word: 'branduolys', syllables: [4, 7] },      // bran-duo-lys
            { word: 'vakuolƒó', syllables: [2, 5] },        // va-kuo-lƒó
            { word: 'citoplazma', syllables: [2, 4, 8] },   // ci-to-plaz-ma
            { word: 'membrana', syllables: [3, 6] },        // mem-bra-na
            { word: 'mitochondrija', syllables: [2, 4, 8, 11] }, // mi-to-chon-dri-ja
            { word: 'chloroplastas', syllables: [4, 6, 10] }, // chlo-ro-plas-tas
            { word: 'ribosoma', syllables: [2, 4, 6] },    // ri-bo-so-ma
            { word: 'lizosoma', syllables: [2, 4, 6] },     // li-zo-so-ma
            { word: 'sienelƒó', syllables: [3, 5] },       // sie-ne-lƒó
            { word: 'centriolƒó', syllables: [3, 6, 7] }      // cen-tri-o-lƒó
        ];

        // --- B≈´senos kintamieji ---
        let currentWordIndex = 0;
        let userSyllables = [];
        let isChecked = false;
        let correctAnswers = 0; // Pridƒóta: Teising≈≥ atsakym≈≥ skaiƒçius

        // --- DOM elementai ---
        const wordContainer = document.getElementById('word-container');
        const checkBtn = document.getElementById('check-btn');
        const nextBtn = document.getElementById('next-btn');
        const feedbackEl = document.getElementById('feedback');
        const progressEl = document.getElementById('progress');
        const instructionEl = document.getElementById('instruction');
        const resultsCard = document.getElementById('results-card'); // Pridƒóta
        const finalScoreEl = document.getElementById('final-score'); // Pridƒóta
        const accuracyEl = document.getElementById('accuracy'); // Pridƒóta


        // --- Funkcijos ---

        /**
         * Paruo≈°ia ir atvaizduoja dabartinƒØ ≈æodƒØ ekrane.
         */
        function displayWord() {
            wordContainer.innerHTML = '';
            userSyllables = [];
            isChecked = false;
            const currentWord = words[currentWordIndex].word;

            currentWord.split('').forEach((letter, index) => {
                const letterSpan = document.createElement('span');
                letterSpan.textContent = letter;
                wordContainer.appendChild(letterSpan);

                if (index < currentWord.length - 1) {
                    const divider = document.createElement('div');
                    divider.classList.add('divider');
                    divider.dataset.index = index + 1;
                    divider.addEventListener('click', () => {
                        if (isChecked) return;
                        toggleSyllableBreak(divider, index + 1);
                    });
                    wordContainer.appendChild(divider);
                }
            });

            updateProgress();
        }

        /**
         * ƒÆjungia arba i≈°jungia skiemens ≈æymƒô.
         */
        function toggleSyllableBreak(dividerEl, position) {
            dividerEl.classList.toggle('selected');
            if (userSyllables.includes(position)) {
                userSyllables = userSyllables.filter(s => s !== position);
            } else {
                userSyllables.push(position);
            }
            userSyllables.sort((a, b) => a - b);
        }

        /**
         * Patikrina vartotojo atsakymƒÖ ir pateikia grƒØ≈ætamƒÖjƒØ ry≈°ƒØ.
         */
        function checkAnswer() {
            if (isChecked) return;
            isChecked = true;
            
            const correctSyllables = words[currentWordIndex].syllables;
            const isCorrect = userSyllables.length === correctSyllables.length &&
                              userSyllables.every((val, index) => val === correctSyllables[index]);

            if (isCorrect) {
                feedbackEl.innerHTML = '<span class="text-green-600">Puiku! Teisingai! üéâ</span>';
                correctAnswers++; // Atnaujiname teising≈≥ atsakym≈≥ skaiƒçi≈≥
            } else {
                const correctWord = formatCorrectAnswer(words[currentWordIndex].word, correctSyllables);
                feedbackEl.innerHTML = `<span class="text-red-600">Beveik... Teisingas atsakymas:</span><br><span class="text-gray-700 font-bold">${correctWord}</span>`;
            }

            checkBtn.classList.add('hidden');
            checkBtn.classList.add('btn-disabled');
            nextBtn.classList.remove('hidden');
            
            if (currentWordIndex === words.length - 1) {
                nextBtn.textContent = 'Baigti u≈æduotƒØ';
            }
        }
        
        /**
         * Formatuoja ≈æodƒØ su skiemen≈≥ br≈´k≈°neliais teisingam atsakymui parodyti.
         */
        function formatCorrectAnswer(word, syllables) {
            let result = '';
            let lastIndex = 0;
            syllables.forEach(pos => {
                result += word.substring(lastIndex, pos) + '-';
                lastIndex = pos;
            });
            result += word.substring(lastIndex);
            return result;
        }

        /**
         * Pereina prie kito ≈æod≈æio arba u≈æbaigia u≈æduotƒØ.
         */
        function goToNextWord() {
            currentWordIndex++;
            if (currentWordIndex < words.length) {
                feedbackEl.innerHTML = '';
                checkBtn.classList.remove('hidden');
                checkBtn.classList.remove('btn-disabled');
                nextBtn.classList.add('hidden');
                displayWord();
            } else {
                // U≈æbaigiame u≈æduotƒØ ir parodome rezultatus
                showFinalResults();
            }
        }
        
        /**
         * Rodo galutinius rezultatus. (Pridƒóta)
         */
        function showFinalResults() {
            document.querySelector('.max-w-4xl').classList.add('hidden'); // Paslepiame pagrindinƒô kortelƒô
            resultsCard.classList.remove('hidden'); // Parodome rezultat≈≥ kortelƒô
            
            const totalWords = words.length;
            const percentage = ((correctAnswers / totalWords) * 100).toFixed(0);

            instructionEl.textContent = 'Sveikiname atlikus u≈æduotƒØ!';

            finalScoreEl.innerHTML = `${correctAnswers} / ${totalWords} <span class="text-xl">teising≈≥ atsakym≈≥</span>`;
            accuracyEl.textContent = `Tiklsumas: ${percentage}%`;
        }

        /**
         * Atnaujina eigos indikatori≈≥.
         */
        function updateProgress() {
            progressEl.textContent = `≈Ωodis ${currentWordIndex + 1} i≈° ${words.length}`;
        }

        // --- ƒÆvyki≈≥ klausytojai ---
        checkBtn.addEventListener('click', checkAnswer);
        nextBtn.addEventListener('click', goToNextWord);

        // --- Pradinis paleidimas ---
        displayWord();
    </script>
</body>

</html>
